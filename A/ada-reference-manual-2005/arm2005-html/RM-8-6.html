<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>The Context of Overload Resolution</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Indented2NestedBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Indented2NestedBulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-8-5-5.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-9.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>8.6 The Context of Overload Resolution</H1>
<div class="paranum">1</div>
<div class="Normal"><A NAME="I3463"></A>Because declarations can be overloaded, 
it is possible for an occurrence of a usage name to have more than one 
possible interpretation; in most cases, ambiguity is disallowed. This 
clause describes how the possible interpretations resolve to the actual 
interpretation.</div>
<div class="paranum">2</div>
<div class="Normal"><A NAME="I3464"></A>Certain rules of the language 
(the Name Resolution Rules) are considered &ldquo;overloading rules&rdquo;. 
If a possible interpretation violates an overloading rule, it is assumed 
not to be the intended interpretation; some other possible interpretation 
is assumed to be the actual interpretation. On the other hand, violations 
of non-overloading rules do not affect which interpretation is chosen; 
instead, they cause the construct to be illegal. To be legal, there usually 
has to be exactly one acceptable interpretation of a construct that is 
a &ldquo;complete context&rdquo;, not counting any nested complete contexts.</div>
<div class="paranum">3</div>
<div class="Normal"><A NAME="I3465"></A>The syntax rules of the language 
and the visibility rules given in <A HREF="RM-8-3.html">8.3</A> determine 
the possible interpretations. Most type checking rules (rules that require 
a particular type, or a particular class of types, for example) are overloading 
rules. Various rules for the matching of formal and actual parameters 
are overloading rules.&nbsp;</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum">4</div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I3466"></A>Overload 
resolution is applied separately to each <I>complete context</I>, not 
counting inner complete contexts. Each of the following constructs is 
a <I>complete context</I>:&nbsp;</div>
<div class="paranum">5</div>
<div class="Bulleted">A <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0236">context_item</A></SPAN>.</div>
<div class="paranum">6</div>
<div class="Bulleted">A <SPAN Class="swiss"><A HREF="RM-3-11.html#S0087">declarative_item</A></SPAN> 
or declaration.&nbsp;</div>
<div class="paranum">7</div>
<div class="Bulleted">A <SPAN Class="swiss"><A HREF="RM-5-1.html#S0131">statement</A></SPAN>.</div>
<div class="paranum">8</div>
<div class="Bulleted">A <SPAN Class="swiss"><A HREF="RM-2-8.html#S0020">pragma_argument_association</A></SPAN>. 
</div>
<div class="paranum">9</div>
<div class="Bulleted">The <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="RM-5-4.html#S0140">case_statement</A></SPAN>. 
</div>
<div class="paranum">10</div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I3467"></A><A NAME="I3468"></A>An 
(overall) <I>interpretation</I> of a complete context embodies its meaning, 
and includes the following information about the constituents of the 
complete context, not including constituents of inner complete contexts: 
</div>
<div class="paranum">11</div>
<div class="Bulleted">for each constituent of the complete context, to 
which syntactic categories it belongs, and by which syntax rules; and 
</div>
<div class="paranum">12</div>
<div class="Bulleted">for each usage name, which declaration it denotes 
(and, therefore, which view and which entity it denotes); and&nbsp;</div>
<div class="paranum">13</div>
<div class="Bulleted">for a complete context that is a <SPAN Class="swiss"><A HREF="RM-3-11.html#S0087">declarative_item</A></SPAN>, 
whether or not it is a completion of a declaration, and (if so) which 
declaration it completes.&nbsp;</div>
<div class="paranum">14</div>
<div class="Normal"><A NAME="I3469"></A>A <I>possible interpretation</I> 
is one that obeys the syntax rules and the visibility rules. <A NAME="I3470"></A><A NAME="I3471"></A><A NAME="I3472"></A>An 
<I>acceptable interpretation</I> is a possible interpretation that obeys 
the <I>overloading rules</I>, that is, those rules that specify an expected 
type or expected profile, or specify how a construct shall <I>resolve</I> 
or be <I>interpreted</I>.&nbsp;</div>
<div class="paranum">15</div>
<div class="Normal"><A NAME="I3473"></A>The <I>interpretation</I> of 
a constituent of a complete context is determined from the overall interpretation 
of the complete context as a whole. Thus, for example, &ldquo;interpreted 
as a <SPAN Class="swiss"><A HREF="RM-6-4.html#S0164">function_call</A></SPAN>,&rdquo; 
means that the construct's interpretation says that it belongs to the 
syntactic category <SPAN Class="swiss"><A HREF="RM-6-4.html#S0164">function_call</A></SPAN>.</div>
<div class="paranum">16</div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I3474"></A>Each 
occurrence of a usage name <I>denotes</I> the declaration determined 
by its interpretation. It also denotes the view declared by its denoted 
declaration, except in the following cases:&nbsp;</div>
<div class="paranum">17/2</div>
<div class="Bulleted"><A NAME="I3475"></A>If a usage name appears within 
the declarative region of a <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0023">type_declaration</A></SPAN> 
and denotes that same <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0023">type_declaration</A></SPAN>, 
then it denotes the <I>current instance</I> of the type (rather than 
the type itself); the current instance of a type is the object or value 
of the type that is associated with the execution that evaluates the 
usage name. This rule does not apply if the usage name appears within 
the <SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="RM-3-10.html#S0084">access_definition</A></SPAN> 
for an access-to-object type, or within the subtype of a parameter or 
result of an access-to-subprogram type.&nbsp;</div>
<div class="paranum">18</div>
<div class="Bulleted"><A NAME="I3476"></A>If a usage name appears within 
the declarative region of a <SPAN Class="swiss"><A HREF="RM-12-1.html#S0252">generic_declaration</A></SPAN> 
(but not within its <SPAN Class="swiss"><A HREF="RM-12-1.html#S0255">generic_formal_part</A></SPAN>) 
and it denotes that same <SPAN Class="swiss"><A HREF="RM-12-1.html#S0252">generic_declaration</A></SPAN>, 
then it denotes the <I>current instance</I> of the generic unit (rather 
than the generic unit itself). See also <A HREF="RM-12-3.html">12.3</A>. 
</div>
<div class="paranum">19</div>
<div class="Normal">A usage name that denotes a view also denotes the 
entity of that view.&nbsp;</div>
<div class="paranum">20/2</div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;<A NAME="I3477"></A>The 
<I>expected type</I> for a given <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>, or other 
construct determines, according to the <I>type resolution rules</I> given 
below, the types considered for the construct during overload resolution. 
<A NAME="I3478"></A>The type resolution rules provide support for class-wide 
programming, universal literals, dispatching operations, and anonymous 
access types:&nbsp;</div>
<div class="paranum">21</div>
<div class="Bulleted"><A NAME="I3479"></A><A NAME="I3480"></A>If a construct 
is expected to be of any type in a class of types, or of the universal 
or class-wide type for a class, then the type of the construct shall 
resolve to a type in that class or to a universal type that covers the 
class.&nbsp;</div>
<div class="paranum">22</div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I3481"></A>If 
the expected type for a construct is a specific type <I>T</I>, then the 
type of the construct shall resolve either to <I>T</I>, or:&nbsp;</div>
<div class="paranum">23</div>
<div class="Indented2NestedBulleted">to <I>T</I>'Class; or&nbsp;</div>
<div class="paranum">24</div>
<div class="Indented2NestedBulleted">to a universal type that covers 
<I>T</I>; or</div>
<div class="paranum">25/2</div>
<div class="Indented2NestedBulleted">when <I>T</I> is a specific anonymous 
access-to-object type (see <A HREF="RM-3-10.html">3.10</A>) with designated 
type <I>D</I>, to an access-to-object type whose designated type is <I>D</I>'Class 
or is covered by <I>D</I>; or</div>
<div class="paranum">25.1/2</div>
<div class="Indented2NestedBulleted">when <I>T</I> is an anonymous access-to-subprogram 
type (see <A HREF="RM-3-10.html">3.10</A>), to an access-to-subprogram 
type whose designated profile is type-conformant with that of <I>T</I>.</div>
<div class="paranum">26</div>
<div class="Normal"><A NAME="I3482"></A>In certain contexts, such as 
in a <SPAN Class="swiss"><A HREF="RM-8-5-4.html#S0186">subprogram_renaming_declaration</A></SPAN>, 
the Name Resolution Rules define an <I>expected profile</I> for a given 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>; <A NAME="I3483"></A>in 
such cases, the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
shall resolve to the name of a callable entity whose profile is type 
conformant with the expected profile. <A NAME="I3484"></A></div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum">27/2</div>
<div class="Normal">&nbsp;<A NAME="I3485"></A>When a construct is one that 
requires that its expected type be a <I>single</I> type in a given class, 
the type of the construct shall be determinable solely from the context 
in which the construct appears, excluding the construct itself, but using 
the requirement that it be in the given class. Furthermore, the context 
shall not be one that expects any type in some class that contains types 
of the given class; in particular, the construct shall not be the operand 
of a <SPAN Class="swiss"><A HREF="RM-4-6.html#S0127">type_conversion</A></SPAN>.</div>
<div class="paranum">28</div>
<div class="Normal">A complete context shall have at least one acceptable 
interpretation; if there is exactly one, then that one is chosen.&nbsp;</div>
<div class="paranum">29</div>
<div class="Normal"><A NAME="I3486"></A>There is a <I>preference</I> 
for the primitive operators (and <SPAN Class="swiss"><A HREF="RM-3-5.html#S0037">range</A></SPAN>s) 
of the root numeric types <I>root_integer</I> and <I>root_real</I>. In 
particular, if two acceptable interpretations of a constituent of a complete 
context differ only in that one is for a primitive operator (or <SPAN Class="swiss"><A HREF="RM-3-5.html#S0037">range</A></SPAN>) 
of the type <I>root_integer</I> or <I>root_real</I>, and the other is 
not, the interpretation using the primitive operator (or <SPAN Class="swiss"><A HREF="RM-3-5.html#S0037">range</A></SPAN>) 
of the root numeric type is <I>preferred</I>.&nbsp;</div>
<div class="paranum">30</div>
<div class="Normal">For a complete context, if there is exactly one overall 
acceptable interpretation where each constituent's interpretation is 
the same as or preferred (in the above sense) over those in all other 
overall acceptable interpretations, then that one overall acceptable 
interpretation is chosen. <A NAME="I3487"></A>Otherwise, the complete 
context is <I>ambiguous</I>.</div>
<div class="paranum">31</div>
<div class="Normal">A complete context other than a <SPAN Class="swiss"><A HREF="RM-2-8.html#S0020">pragma_argument_association</A></SPAN> 
shall not be ambiguous.</div>
<div class="paranum">32</div>
<div class="Normal">A complete context that is a <SPAN Class="swiss"><A HREF="RM-2-8.html#S0020">pragma_argument_association</A></SPAN> 
is allowed to be ambiguous (unless otherwise specified for the particular 
pragma), but only if every acceptable interpretation of the pragma argument 
is as a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
that statically denotes a callable entity. <A NAME="I3488"></A>Such a 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> denotes 
all of the declarations determined by its interpretations, and all of 
the views declared by these declarations.&nbsp;</div>
<div class="NotesHeader">NOTES</div>
<div class="paranum">33</div>
<div class="Notes">17&nbsp;&nbsp;If a usage name has only one acceptable 
interpretation, then it denotes the corresponding entity. However, this 
does not mean that the usage name is necessarily legal since other requirements 
exist which are not considered for overload resolution; for example, 
the fact that an expression is static, whether an object is constant, 
mode and subtype conformance rules, freezing rules, order of elaboration, 
and so on.</div>
<div class="paranum">34</div>
<div class="Notes">Similarly, subtypes are not considered for overload 
resolution (the violation of a constraint does not make a program illegal 
but raises an exception during program execution).&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-8-5-5.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-9.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
