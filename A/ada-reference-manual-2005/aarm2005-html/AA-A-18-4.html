<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Maps</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Indented2 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Indented3Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Indented3Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>A.18.4 Maps</H1>
<div class="paranum">1/2</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
The language-defined generic packages Containers.Hashed_Maps and Containers.Ordered_Maps 
provide private types Map and Cursor, and a set of operations for each 
type. A map container allows an arbitrary type to be used as a key to 
find the element associated with that key. A hashed map uses a hash function 
to organize the keys, while an ordered map orders the keys per a specified 
relation. <SPAN STYLE="font-size: 80%">{<I>map container</I>}</SPAN> 
<A NAME="I6558"></A><SPAN STYLE="font-size: 80%">{<I>container (map)</I>}</SPAN> 
<A NAME="I6559"></A></div>
<div class="paranum">2/2</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
This section describes the declarations that are common to both kinds 
of maps. See <A HREF="AA-A-18-5.html">A.18.5</A> for a description of 
the semantics specific to Containers.Hashed_Maps and <A HREF="AA-A-18-6.html">A.18.6</A> 
for a description of the semantics specific to Containers.Ordered_Maps. 
</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum">3/2</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
The actual function for the generic formal function &quot;=&quot; on 
Element_Type values is expected to define a reflexive and symmetric relationship 
and return the same result value each time it is called with a particular 
pair of values. If it behaves in some other manner, the function &quot;=&quot; 
on map values returns an unspecified value. The exact arguments and number 
of calls of this generic formal function by the function &quot;=&quot; 
on map values are unspecified.<SPAN STYLE="font-size: 80%">{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I6560"></A></div>
<div class="paranum">3.a/2</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>If the actual function 
for &quot;=&quot; is not symmetric and consistent, the result returned 
by &quot;=&quot; for Map objects cannot be predicted. The implementation 
is not required to protect against &quot;=&quot; raising an exception, 
or returning random results, or any other &ldquo;bad&rdquo; behavior. 
And it can call &quot;=&quot; in whatever manner makes sense. But note 
that only the result of &quot;=&quot; for Map objects is unspecified; 
other subprograms are not allowed to break if &quot;=&quot; is bad (they 
aren't expected to use &quot;=&quot;).&nbsp;</div>
<div class="paranum">4/2</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
The type Map is used to represent maps. The type Map needs finalization 
(see <A HREF="AA-7-6.html">7.6</A>).</div>
<div class="paranum">5/2</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>node (of a map)</I>}</SPAN> <A NAME="I6561"></A>A 
map contains pairs of keys and elements, called <I>nodes</I>. Map cursors 
designate nodes, but also can be thought of as designating an element 
(the element contained in the node) for consistency with the other containers. 
There exists an equivalence relation on keys, whose definition is different 
for hashed maps and ordered maps. A map never contains two or more nodes 
with equivalent keys. The <I>length</I> of a map is the number of nodes 
it contains.<SPAN STYLE="font-size: 80%">{<I>length (of a map)</I>}</SPAN> 
<A NAME="I6562"></A></div>
<div class="paranum">6/2</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>first node (of a map)</I>}</SPAN> <A NAME="I6563"></A><SPAN STYLE="font-size: 80%">{<I>last 
node (of a map)</I>}</SPAN> <A NAME="I6564"></A><SPAN STYLE="font-size: 80%">{<I>successor 
node (of a map)</I>}</SPAN> <A NAME="I6565"></A>Each nonempty map has 
two particular nodes called the <I>first node</I> and the <I>last node</I> 
(which may be the same). Each node except for the last node has a <I>successor 
node</I>. If there are no other intervening operations, starting with 
the first node and repeatedly going to the successor node will visit 
each node in the map exactly once until the last node is reached. The 
exact definition of these terms is different for hashed maps and ordered 
maps.</div>
<div class="paranum">7/2</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
[Some operations of these generic packages have access-to-subprogram 
parameters. To ensure such operations are well-defined, they guard against 
certain actions by the designated subprogram. In particular, some operations 
check for &ldquo;tampering with cursors&rdquo; of a container because 
they depend on the set of elements of the container remaining constant, 
and others check for &ldquo;tampering with elements&rdquo; of a container 
because they depend on elements of the container not being replaced.]</div>
<div class="paranum">8/2</div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>tamper with cursors (of a map)</I>}</SPAN> 
<A NAME="I6566"></A>A subprogram is said to <I>tamper with cursors</I> 
of a map object <I>M</I> if:</div>
<div class="paranum">9/2</div>
<div class="Bulleted">it inserts or deletes elements of <I>M</I>, that 
is, it calls the Insert, Include, Clear, Delete, or Exclude procedures 
with <I>M</I> as a parameter; or</div>
<div class="paranum">9.a/2</div>
<div class="Annotations"><B>To be honest:&nbsp;</B>Operations which are defined 
to be equivalent to a call on one of these operations also are included. 
Similarly, operations which call one of these as part of their definition 
are included.&nbsp;</div>
<div class="paranum">10/2</div>
<div class="Bulleted">it finalizes <I>M</I>; or</div>
<div class="paranum">11/2</div>
<div class="Bulleted">it calls the Move procedure with <I>M</I> as a 
parameter; or</div>
<div class="paranum">12/2</div>
<div class="Bulleted">it calls one of the operations defined to tamper 
with the cursors of <I>M</I>.</div>
<div class="paranum">12.a/2</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Replace only modifies a 
key and element rather than rehashing, so it does not tamper with cursors. 
</div>
<div class="paranum">13/2</div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>tamper with elements (of a map)</I>}</SPAN> 
<A NAME="I6567"></A>A subprogram is said to <I>tamper with elements</I> 
of a map object <I>M</I> if:</div>
<div class="paranum">14/2</div>
<div class="Bulleted">it tampers with cursors of <I>M</I>; or</div>
<div class="paranum">15/2</div>
<div class="Bulleted">it replaces one or more elements of <I>M</I>, that 
is, it calls the Replace or Replace_Element procedures with <I>M</I> 
as a parameter.</div>
<div class="paranum">15.a/2</div>
<div class="Annotations"><B>Reason:&nbsp;</B>Complete replacement of an element 
can cause its memory to be deallocated while another operation is holding 
onto a reference to it. That can't be allowed. However, a simple modification 
of (part of) an element is not a problem, so Update_Element does not 
cause a problem.&nbsp;</div>
<div class="paranum">16/2</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Empty_Map represents the empty Map object. It has a length of 0. If an 
object of type Map is not otherwise initialized, it is initialized to 
the same value as Empty_Map.</div>
<div class="paranum">17/2</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
No_Element represents a cursor that designates no node. If an object 
of type Cursor is not otherwise initialized, it is initialized to the 
same value as No_Element.</div>
<div class="paranum">18/2</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
The predefined &quot;=&quot; operator for type Cursor returns True if 
both cursors are No_Element, or designate the same element in the same 
container.</div>
<div class="paranum">19/2</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Execution of the default implementation of the Input, Output, Read, or 
Write attribute of type Cursor raises Program_Error.</div>
<div class="paranum">19.a/2</div>
<div class="Annotations"><B>Reason:&nbsp;</B>A cursor will probably be implemented 
in terms of one or more access values, and the effects of streaming access 
values is unspecified. Rather than letting the user stream junk by accident, 
we mandate that streaming of cursors raise Program_Error by default. 
The attributes can always be specified if there is a need to support 
streaming.&nbsp;</div>
<div class="paranum">20/2</div>
<div class="Examples"><B>function</B>&nbsp;&quot;=&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Map)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum">21/2</div>
<div class="Indented2" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Left and Right denote the same map object, then the function returns 
True. If Left and Right have different lengths, then the function returns 
False. Otherwise, for each key <I>K</I> in Left, the function returns 
False if:</div>
<div class="paranum">22/2</div>
<div class="Indented3Bulleted">a key equivalent to <I>K</I> is not present 
in Right; or</div>
<div class="paranum">23/2</div>
<div class="Indented3Bulleted">the element associated with <I>K</I> in 
Left is not equal to the element associated with <I>K</I> in Right (using 
the generic formal equality operator for elements).&nbsp;</div>
<div class="paranum">24/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">If the function 
has not returned a result after checking all of the keys, it returns 
True. Any exception raised during evaluation of key equivalence or element 
equality is propagated.&nbsp;</div>
<div class="paranum">24.a/2</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>This wording describes 
the canonical semantics. However, the order and number of calls on the 
formal equality function is unspecified for all of the operations that 
use it in this package, so an implementation can call it as many or as 
few times as it needs to get the correct answer. Specifically, there 
is no requirement to call the formal equality additional times once the 
answer has been determined.&nbsp;</div>
<div class="paranum">25/2</div>
<div class="Examples"><B>function</B>&nbsp;Length&nbsp;(Container&nbsp;:&nbsp;Map)&nbsp;<B>return</B>&nbsp;Count_Type;</div>
<div class="paranum">26/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Returns the number of nodes in Container.</div>
<div class="paranum">27/2</div>
<div class="Examples"><B>function</B>&nbsp;Is_Empty&nbsp;(Container&nbsp;:&nbsp;Map)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum">28/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Equivalent to Length (Container) = 0.</div>
<div class="paranum">29/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Clear&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map);</div>
<div class="paranum">30/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Removes all the nodes from Container.</div>
<div class="paranum">31/2</div>
<div class="Examples"><B>function</B>&nbsp;Key&nbsp;(Position&nbsp;:&nbsp;Cursor)&nbsp;<B>return</B>&nbsp;Key_Type;</div>
<div class="paranum">32/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Position equals No_Element, then Constraint_Error is propagated. Otherwise, 
Key returns the key component of the node designated by Position.</div>
<div class="paranum">33/2</div>
<div class="Examples"><B>function</B>&nbsp;Element&nbsp;(Position&nbsp;:&nbsp;Cursor)&nbsp;<B>return</B>&nbsp;Element_Type;</div>
<div class="paranum">34/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Position equals No_Element, then Constraint_Error is propagated. Otherwise, 
Element returns the element component of the node designated by Position.</div>
<div class="paranum">35/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Replace_Element&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Position&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cursor;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</div>
<div class="paranum">36/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Position equals No_Element, then Constraint_Error is propagated; if 
Position does not designate an element in Container, then Program_Error 
is propagated. Otherwise Replace_Element assigns New_Item to the element 
of the node designated by Position.</div>
<div class="paranum">37/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Query_Element<BR>
&nbsp;&nbsp;(Position&nbsp;:&nbsp;<B>in</B>&nbsp;Cursor;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B>&nbsp;(Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;Key_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element&nbsp;:&nbsp;<B>in</B>&nbsp;Element_Type));</div>
<div class="paranum">38/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Position equals No_Element, then Constraint_Error is propagated. Otherwise, 
Query_Element calls Process.<B>all</B> with the key and element from 
the node designated by Position as the arguments. Program_Error is propagated 
if Process.<B>all</B> tampers with the elements of Container. Any exception 
raised by Process.<B>all</B> is propagated.</div>
<div class="paranum">39/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Update_Element<BR>
&nbsp;&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;Position&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cursor;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B>&nbsp;(Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Element_Type));</div>
<div class="paranum">40/2</div>
<div class="Indented2">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Position equals No_Element, then Constraint_Error is propagated; if 
Position does not designate an element in Container, then Program_Error 
is propagated. Otherwise Update_Element calls Process.<B>all</B> with 
the key and element from the node designated by Position as the arguments. 
Program_Error is propagated if Process.<B>all</B> tampers with the elements 
of Container. Any exception raised by Process.<B>all</B> is propagated.</div>
<div class="paranum">41/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">If Element_Type 
is unconstrained and definite, then the actual Element parameter of Process.<B>all</B> 
shall be unconstrained.</div>
<div class="paranum">41.a/2</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This means that the elements 
cannot be directly allocated from the heap; it must be possible to change 
the discriminants of the element in place.&nbsp;</div>
<div class="paranum">42/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Move&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map);</div>
<div class="paranum">43/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Target denotes the same object as Source, then Move has no effect. 
Otherwise, Move first calls Clear (Target). Then, each node from Source 
is removed from Source and inserted into Target. The length of Source 
is 0 after a successful call to Move.</div>
<div class="paranum">44/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Insert&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Position&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;<B>out</B>&nbsp;Cursor;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inserted&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;<B>out</B>&nbsp;Boolean);</div>
<div class="paranum">45/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Insert checks if a node with a key equivalent to Key is already present 
in Container. If a match is found, Inserted is set to False and Position 
designates the element with the matching key. Otherwise, Insert allocates 
a new node, initializes it to Key and New_Item, and adds it to Container; 
Inserted is set to True and Position designates the newly-inserted node. 
Any exception raised during allocation is propagated and Container is 
not modified.</div>
<div class="paranum">46/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Insert&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Position&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;<B>out</B>&nbsp;Cursor;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inserted&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;<B>out</B>&nbsp;Boolean);</div>
<div class="paranum">47/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Insert inserts Key into Container as per the five-parameter Insert, with 
the difference that an element initialized by default (see <A HREF="AA-3-3-1.html">3.3.1</A>) 
is inserted.</div>
<div class="paranum">48/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Insert&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</div>
<div class="paranum">49/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Insert inserts Key and New_Item into Container as per the five-parameter 
Insert, with the difference that if a node with a key equivalent to Key 
is already in the map, then Constraint_Error is propagated.</div>
<div class="paranum">49.a/2</div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Ramification: 
</B>This is equivalent to:&nbsp;</div>
<div class="paranum">49.b/2</div>
<div class="SmallExamples"><B>declare</B><BR>
&nbsp;&nbsp;Inserted&nbsp;:&nbsp;Boolean;&nbsp;C&nbsp;:&nbsp;Cursor;<BR>
<B>begin</B><BR>
&nbsp;&nbsp;Insert&nbsp;(Container,&nbsp;Key,&nbsp;New_Item,&nbsp;C,&nbsp;Inserted);<BR>
&nbsp;&nbsp;<B>if&nbsp;not</B>&nbsp;Inserted&nbsp;<B>then</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>raise</B>&nbsp;Constraint_Error;<BR>
&nbsp;&nbsp;<B>end&nbsp;if</B>;<BR>
<B>end</B>;</div>
<div class="paranum">49.c/2</div>
<div class="Annotations">but doesn't require the hassle of <B>out</B> 
parameters.&nbsp;</div>
<div class="paranum">50/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Include&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</div>
<div class="paranum">51/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Include inserts Key and New_Item into Container as per the five-parameter 
Insert, with the difference that if a node with a key equivalent to Key 
is already in the map, then this operation assigns Key and New_Item to 
the matching node. Any exception raised during assignment is propagated.</div>
<div class="paranum">51.a/2</div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Ramification: 
</B>This is equivalent to:&nbsp;</div>
<div class="paranum">51.b/2</div>
<div class="SmallExamples"><B>declare</B><BR>
&nbsp;&nbsp;C&nbsp;:&nbsp;Cursor&nbsp;:=&nbsp;Find&nbsp;(Container,&nbsp;Key);<BR>
<B>begin</B><BR>
&nbsp;&nbsp;<B>if</B>&nbsp;C&nbsp;=&nbsp;No_Element&nbsp;<B>then</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Insert&nbsp;(Container,&nbsp;Key,&nbsp;New_Item);<BR>
&nbsp;&nbsp;<B>else</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Replace&nbsp;(Container,&nbsp;Key,&nbsp;New_Item);<BR>
&nbsp;&nbsp;<B>end&nbsp;if</B>;<BR>
<B>end</B>;</div>
<div class="paranum">51.c/2</div>
<div class="Annotations">but this avoids doing the search twice.&nbsp;</div>
<div class="paranum">52/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Replace&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</div>
<div class="paranum">53/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Replace checks if a node with a key equivalent to Key is present in Container. 
If a match is found, Replace assigns Key and New_Item to the matching 
node; otherwise, Constraint_Error is propagated.</div>
<div class="paranum">53.a/2</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>We update the key as well 
as the element, as the key might include additional information that 
does not participate in equivalence. If only the element needs to be 
updated, use Replace_Element (Find (Container, Key), New_Element).&nbsp;</div>
<div class="paranum">54/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Exclude&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key_Type);</div>
<div class="paranum">55/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Exclude checks if a node with a key equivalent to Key is present in Container. 
If a match is found, Exclude removes the node from the map.</div>
<div class="paranum">55.a/2</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Exclude should work on 
an empty map; nothing happens in that case.&nbsp;</div>
<div class="paranum">56/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Delete&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key_Type);</div>
<div class="paranum">57/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Delete checks if a node with a key equivalent to Key is present in Container. 
If a match is found, Delete removes the node from the map; otherwise, 
Constraint_Error is propagated.</div>
<div class="paranum">58/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Delete&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Position&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Cursor);</div>
<div class="paranum">59/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Position equals No_Element, then Constraint_Error is propagated. If 
Position does not designate an element in Container, then Program_Error 
is propagated. Otherwise, Delete removes the node designated by Position 
from the map. Position is set to No_Element on return.</div>
<div class="paranum">59.a/2</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The check on Position checks 
that the cursor does not belong to some other map. This check implies 
that a reference to the map is included in the cursor value. This wording 
is not meant to require detection of dangling cursors; such cursors are 
defined to be invalid, which means that execution is erroneous, and any 
result is allowed (including not raising an exception).&nbsp;</div>
<div class="paranum">60/2</div>
<div class="Examples"><B>function</B>&nbsp;First&nbsp;(Container&nbsp;:&nbsp;Map)&nbsp;<B>return</B>&nbsp;Cursor;</div>
<div class="paranum">61/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Length (Container) = 0, then First returns No_Element. Otherwise, 
First returns a cursor that designates the first node in Container.</div>
<div class="paranum">62/2</div>
<div class="Examples"><B>function</B>&nbsp;Next&nbsp;(Position&nbsp;&nbsp;:&nbsp;Cursor)&nbsp;<B>return</B>&nbsp;Cursor;</div>
<div class="paranum">63/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Returns a cursor that designates the successor of the node designated 
by Position. If Position designates the last node, then No_Element is 
returned. If Position equals No_Element, then No_Element is returned.</div>
<div class="paranum">64/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Next&nbsp;(Position&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Cursor);</div>
<div class="paranum">65/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Equivalent to Position := Next (Position).</div>
<div class="paranum">66/2</div>
<div class="Examples"><B>function</B>&nbsp;Find&nbsp;(Container&nbsp;:&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Key_Type)&nbsp;<B>return</B>&nbsp;Cursor;</div>
<div class="paranum">67/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If Length (Container) equals 0, then Find returns No_Element. Otherwise, 
Find checks if a node with a key equivalent to Key is present in Container. 
If a match is found, a cursor designating the matching node is returned; 
otherwise, No_Element is returned.</div>
<div class="paranum">68/2</div>
<div class="Examples"><B>function</B>&nbsp;Element&nbsp;(Container&nbsp;:&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Key_Type)&nbsp;<B>return</B>&nbsp;Element_Type;</div>
<div class="paranum">69/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Equivalent to Element (Find (Container, Key)).</div>
<div class="paranum">70/2</div>
<div class="Examples"><B>function</B>&nbsp;Contains&nbsp;(Container&nbsp;:&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Key_Type)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum">71/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Equivalent to Find (Container, Key) /= No_Element.</div>
<div class="paranum">72/2</div>
<div class="Examples"><B>function</B>&nbsp;Has_Element&nbsp;(Position&nbsp;:&nbsp;Cursor)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum">73/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Returns True if Position designates a node, and returns False otherwise.</div>
<div class="paranum">73.a/2</div>
<div class="Annotations"><B>To be honest:&nbsp;</B>This function may not detect 
cursors that designate deleted elements; such cursors are invalid (see 
below); the result of Has_Element for invalid cursors is unspecified 
(but not erroneous).&nbsp;</div>
<div class="paranum">74/2</div>
<div class="Examples"><B>procedure</B>&nbsp;Iterate<BR>
&nbsp;&nbsp;(Container&nbsp;:&nbsp;<B>in</B>&nbsp;Map;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B>&nbsp;(Position&nbsp;:&nbsp;<B>in</B>&nbsp;Cursor));</div>
<div class="paranum">75/2</div>
<div class="Indented2" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Iterate calls Process.<B>all</B> with a cursor that designates each node 
in Container, starting with the first node and moving the cursor according 
to the successor relation. Program_Error is propagated if Process.<B>all</B> 
tampers with the cursors of Container. Any exception raised by Process.<B>all</B> 
is propagated.</div>
<div class="paranum">75.a/2</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>The &ldquo;tamper 
with cursors&rdquo; check takes place when the operations that insert 
or delete elements, and so on, are called.</div>
<div class="paranum">75.b/2</div>
<div class="Annotations">See Iterate for vectors (<A HREF="AA-A-18-2.html">A.18.2</A>) 
for a suggested implementation of the check.&nbsp;</div>

<H4 Class="centered">Erroneous Execution</H4>
<div class="paranum">76/2</div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
A Cursor value is <I>invalid</I> if any of the following have occurred 
since it was created:<SPAN STYLE="font-size: 80%">{<I>invalid cursor 
(of a map)</I>}</SPAN> <A NAME="I6568"></A><SPAN STYLE="font-size: 80%">{<I>cursor 
(invalid)</I> [partial]}</SPAN> <A NAME="I6569"></A></div>
<div class="paranum">77/2</div>
<div class="Bulleted">The map that contains the node it designates has 
been finalized;</div>
<div class="paranum">78/2</div>
<div class="Bulleted">The map that contains the node it designates has 
been used as the Source or Target of a call to Move; or</div>
<div class="paranum">79/2</div>
<div class="Bulleted">The node it designates has been deleted from the 
map.&nbsp;</div>
<div class="paranum">80/2</div>
<div class="Normal">&nbsp;The result of &quot;=&quot; or Has_Element is unspecified 
if these functions are called with an invalid cursor parameter.<SPAN STYLE="font-size: 80%">{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I6570"></A>Execution is erroneous if any other 
subprogram declared in Containers.Hashed_Maps or Containers.Ordered_Maps 
is called with an invalid cursor parameter.<SPAN STYLE="font-size: 80%">{<I>erroneous 
execution (cause)</I> [partial]}</SPAN> <A NAME="I6571"></A></div>
<div class="paranum">80.a/2</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The list above is intended 
to be exhaustive. In other cases, a cursor value continues to designate 
its original element. For instance, cursor values survive the insertion 
and deletion of other nodes.</div>
<div class="paranum">80.b/2</div>
<div class="Annotations">While it is possible to check for these cases, 
in many cases the overhead necessary to make the check is substantial 
in time or space. Implementations are encouraged to check for as many 
of these cases as possible and raise Program_Error if detected.&nbsp;</div>

<H4 Class="centered">Implementation Requirements</H4>
<div class="paranum">81/2</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
No storage associated with a Map object shall be lost upon assignment 
or scope exit.</div>
<div class="paranum">82/2</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
The execution of an <SPAN Class="swiss"><A HREF="AA-5-2.html#S0137">assignment_statement</A></SPAN> 
for a map shall have the effect of copying the elements from the source 
map object to the target map object.</div>
<div class="paranum">82.a/2</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>An assignment of 
a Map is a &ldquo;deep&rdquo; copy; that is the elements are copied as 
well as the data structures. We say &ldquo;effect of&rdquo; in order 
to allow the implementation to avoid copying elements immediately if 
it wishes. For instance, an implementation that avoided copying until 
one of the containers is modified would be allowed.&nbsp;</div>

<H4 Class="centered">Implementation Advice</H4>
<div class="paranum">83/2</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
Move should not copy elements, and should minimize copying of internal 
data structures.&nbsp;</div>
<div class="paranum">83.a/2</div>
<div class="Annotations"><B>Implementation Advice:&nbsp;</B>Move for a map 
should not copy elements, and should minimize copying of internal data 
structures.</div>
<div class="paranum">83.b/2</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>Usually that can 
be accomplished simply by moving the pointer(s) to the internal data 
structures from the Source container to the Target container.&nbsp;</div>
<div class="paranum">84/2</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
If an exception is propagated from a map operation, no storage should 
be lost, nor any elements removed from a map unless specified by the 
operation.&nbsp;</div>
<div class="paranum">84.a/2</div>
<div class="Annotations"><B>Implementation Advice:&nbsp;</B>If an exception 
is propagated from a map operation, no storage should be lost, nor any 
elements removed from a map unless specified by the operation.</div>
<div class="paranum">84.b/2</div>
<div class="Annotations"><B>Reason:&nbsp;</B>This is important so that programs 
can recover from errors. But we don't want to require heroic efforts, 
so we just require documentation of cases where this can't be accomplished. 
</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum">84.c/2</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
This description of maps is new; the extensions are documented with the 
specific packages.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
