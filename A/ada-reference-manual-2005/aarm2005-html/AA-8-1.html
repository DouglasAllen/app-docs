<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Declarative Region</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.SmallBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>8.1 Declarative Region</H1>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum">1</div>
<div class="Normal" style="margin-bottom: 0.4em"><SPAN STYLE="font-size: 80%">{<I>declarative 
region (of a construct)</I>}</SPAN> <A NAME="I3564"></A>For each of the 
following constructs, there is a portion of the program text called its 
<I>declarative region</I>, [within which nested declarations can occur]: 
</div>
<div class="paranum">2</div>
<div class="Bulleted">any declaration, other than that of an enumeration 
type, that is not a completion [of a previous declaration];</div>
<div class="paranum">3</div>
<div class="Bulleted">a <SPAN Class="swiss"><A HREF="AA-5-6.html#S0145">block_statement</A></SPAN>;</div>
<div class="paranum">4</div>
<div class="Bulleted">a <SPAN Class="swiss"><A HREF="AA-5-5.html#S0142">loop_statement</A></SPAN>;</div>
<div class="paranum">4.1/2</div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
an <SPAN Class="swiss"><A HREF="AA-6-5.html#S0170">extended_return_statement</A></SPAN>;</div>
<div class="paranum">5</div>
<div class="Bulleted">an <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0201">accept_statement</A></SPAN>;</div>
<div class="paranum">6</div>
<div class="Bulleted">an <SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN>. 
</div>
<div class="paranum">7</div>
<div class="Normal" style="margin-bottom: 0.4em">The declarative region 
includes the text of the construct together with additional text determined 
[(recursively)], as follows:&nbsp;</div>
<div class="paranum">8</div>
<div class="Bulleted">If a declaration is included, so is its completion, 
if any.</div>
<div class="paranum">9</div>
<div class="Bulleted">If the declaration of a library unit [(including 
Standard &mdash; see <A HREF="AA-10-1-1.html">10.1.1</A>)] is included, 
so are the declarations of any child units [(and their completions, by 
the previous rule)]. The child declarations occur after the declaration.</div>
<div class="paranum">10</div>
<div class="Bulleted">If a <SPAN Class="swiss"><A HREF="AA-10-1-3.html#S0240">body_stub</A></SPAN> 
is included, so is the corresponding <SPAN Class="swiss"><A HREF="AA-10-1-3.html#S0245">subunit</A></SPAN>.</div>
<div class="paranum">11</div>
<div class="Bulleted">If a <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN> 
is included, then so is a corresponding <SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0289">record_representation_clause</A></SPAN>, 
if any.&nbsp;</div>
<div class="paranum">11.a</div>
<div class="Annotations"><B>Reason:&nbsp;</B>This is so that the <SPAN Class="swiss"><A HREF="AA-3-8.html#S0070">component_declaration</A></SPAN>s 
can be directly visible in the <SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0289">record_representation_clause</A></SPAN>. 
</div>
<div class="paranum">12</div>
<div class="Normal">The declarative region of a declaration is also called 
the <I>declarative region</I> of any view or entity declared by the declaration. 
</div>
<div class="paranum">12.a</div>
<div class="Annotations"><B>Reason:&nbsp;</B>The constructs that have declarative 
regions are the constructs that can have declarations nested inside them. 
Nested declarations are declared in that declarative region. The one 
exception is for enumeration literals; although they are nested inside 
an enumeration type declaration, they behave as if they were declared 
at the same level as the type.&nbsp;</div>
<div class="paranum">12.b</div>
<div class="Annotations"><B>To be honest:&nbsp;</B>A declarative region does 
not include <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0234">parent_unit_name</A></SPAN>s. 
</div>
<div class="paranum">12.c</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>A declarative region does 
not include <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN>s. 
</div>
<div class="paranum">13</div>
<div class="Normal"><SPAN STYLE="font-size: 80%">{<I>occur immediately 
within</I>}</SPAN> <A NAME="I3565"></A><SPAN STYLE="font-size: 80%">{<I>immediately 
within</I>}</SPAN> <A NAME="I3566"></A><SPAN STYLE="font-size: 80%">{<I>within 
(immediately)</I>}</SPAN> <A NAME="I3567"></A><SPAN STYLE="font-size: 80%">{<I>immediately 
enclosing</I>}</SPAN> <A NAME="I3568"></A><SPAN STYLE="font-size: 80%">{<I>enclosing 
(immediately)</I>}</SPAN> <A NAME="I3569"></A>A declaration occurs <I>immediately 
within</I> a declarative region if this region is the innermost declarative 
region that encloses the declaration (the <I>immediately enclosing</I> 
declarative region), not counting the declarative region (if any) associated 
with the declaration itself.&nbsp;</div>
<div class="paranum">13.a</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Don't confuse the declarative 
region of a declaration with the declarative region in which it immediately 
occurs.&nbsp;</div>
<div class="paranum">14</div>
<div class="Normal">[<SPAN STYLE="font-size: 80%">{<I>local to</I>}</SPAN> 
<A NAME="I3570"></A>A declaration is <I>local</I> to a declarative region 
if the declaration occurs immediately within the declarative region.] 
[An entity is <I>local</I> to a declarative region if the entity is declared 
by a declaration that is local to the declarative region.]&nbsp;</div>
<div class="paranum">14.a</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>&quot;Occurs immediately 
within&quot; and &quot;local to&quot; are synonyms (when referring to 
declarations).</div>
<div class="paranum">14.b</div>
<div class="Annotations">Thus, &ldquo;local to&rdquo; applies to both 
declarations and entities, whereas &ldquo;occurs immediately within&rdquo; 
only applies to declarations. We use this term only informally; for cases 
where precision is required, we use the term &quot;occurs immediately 
within&quot;, since it is less likely to cause confusion.&nbsp;</div>
<div class="paranum">15</div>
<div class="Normal"><SPAN STYLE="font-size: 80%">{<I>global to</I>}</SPAN> 
<A NAME="I3571"></A>A declaration is <I>global</I> to a declarative region 
if the declaration occurs immediately within another declarative region 
that encloses the declarative region. An entity is <I>global</I> to a 
declarative region if the entity is declared by a declaration that is 
global to the declarative region.&nbsp;</div>
<div class="NotesHeader">NOTES</div>
<div class="paranum">16</div>
<div class="Notes">1&nbsp;&nbsp;The children of a parent library unit 
are inside the parent's declarative region, even though they do not occur 
inside the parent's declaration or body. This implies that one can use 
(for example) &quot;P.Q&quot; to refer to a child of P whose defining 
name is Q, and that after &quot;<B>use</B> P;&quot; Q can refer (directly) 
to that child.</div>
<div class="paranum">17</div>
<div class="Notes">2&nbsp;&nbsp;As explained above and in <A HREF="AA-10-1-1.html">10.1.1</A>, 
&ldquo;<A HREF="AA-10-1-1.html">Compilation Units - Library Units</A>&rdquo;, 
all library units are descendants of Standard, and so are contained in 
the declarative region of Standard. They are <I>not</I> inside the declaration 
or body of Standard, but they <I>are</I> inside its declarative region.</div>
<div class="paranum">18</div>
<div class="Notes">3&nbsp;&nbsp;For a declarative region that comes in 
multiple parts, the text of the declarative region does not contain any 
text that might appear between the parts. Thus, when a portion of a declarative 
region is said to extend from one place to another in the declarative 
region, the portion does not contain any text that might appear between 
the parts of the declarative region.&nbsp;</div>
<div class="paranum">18.a</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>It is necessary for the things 
that have a declarative region to include anything that contains declarations 
(except for enumeration type declarations). This includes any declaration 
that has a profile (that is, <SPAN Class="swiss"><A HREF="AA-6-1.html#S0148">subprogram_declaration</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0200">entry_declaration</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0186">subprogram_renaming_declaration</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN>, 
access-to-subprogram <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN>), 
anything that has a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0059">discriminant_part</A></SPAN> 
(that is, various kinds of <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN>), 
anything that has a <SPAN Class="swiss"><A HREF="AA-3-8.html#S0068">component_list</A></SPAN> 
(that is, record <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN> 
and record extension <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN>), 
and finally the declarations of task and protected units and packages. 
</div>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<div class="paranum">18.b</div>
<div class="Annotations" style="margin-bottom: 0.4em">It was necessary 
to extend Ada 83's definition of declarative region to take the following 
Ada 95 features into account:&nbsp;</div>
<div class="paranum">18.c</div>
<div class="SmallBulleted">Child library units.</div>
<div class="paranum">18.d</div>
<div class="SmallBulleted">Derived types/type extensions &mdash; we need 
a declarative region for inherited components and also for new components.</div>
<div class="paranum">18.e</div>
<div class="SmallBulleted">All the kinds of types that allow discriminants.</div>
<div class="paranum">18.f</div>
<div class="SmallBulleted">Protected units.</div>
<div class="paranum">18.g</div>
<div class="SmallBulleted">Entries that have bodies instead of accept 
statements.</div>
<div class="paranum">18.h</div>
<div class="SmallBulleted">The <SPAN Class="swiss"><A HREF="AA-11-2.html#S0249">choice_parameter_specification</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN>.</div>
<div class="paranum">18.i</div>
<div class="SmallBulleted">The formal parameters of access-to-subprogram 
types.</div>
<div class="paranum">18.j</div>
<div class="SmallBulleted">Renamings-as-body.&nbsp;</div>
<div class="paranum">18.k</div>
<div class="Annotations">Discriminated and access-to-subprogram type 
declarations need a declarative region. Enumeration type declarations 
cannot have one, because you don't have to say &quot;Color.Red&quot; 
to refer to the literal Red of Color. For other type declarations, it 
doesn't really matter whether or not there is an associated declarative 
region, so for simplicity, we give one to all types except enumeration 
types.</div>
<div class="paranum">18.l</div>
<div class="Annotations">We now say that an <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0201">accept_statement</A></SPAN> 
has its own declarative region, rather than being part of the declarative 
region of the <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0200">entry_declaration</A></SPAN>, 
so that declarative regions are properly nested regions of text, so that 
it makes sense to talk about &quot;inner declarative regions,&quot; and 
&quot;...extends to the end of a declarative region.&quot; Inside an 
<SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0201">accept_statement</A></SPAN>, 
the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> of 
one of the parameters denotes the <SPAN Class="swiss"><A HREF="AA-6-1.html#S0160">parameter_specification</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0201">accept_statement</A></SPAN>, 
not that of the <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0200">entry_declaration</A></SPAN>. 
If the <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0201">accept_statement</A></SPAN> 
is nested within a <SPAN Class="swiss"><A HREF="AA-5-6.html#S0145">block_statement</A></SPAN>, 
these <SPAN Class="swiss"><A HREF="AA-6-1.html#S0160">parameter_specification</A></SPAN>s 
can hide declarations of the <SPAN Class="swiss"><A HREF="AA-5-6.html#S0145">block_statement</A></SPAN>. 
The semantics of such cases was unclear in RM83.&nbsp;</div>
<div class="paranum">18.m</div>
<div class="Annotations"><B>To be honest:&nbsp;</B>Unfortunately, we have 
the same problem for the entry name itself &mdash; it should denote the 
<SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0201">accept_statement</A></SPAN>, 
but <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0201">accept_statement</A></SPAN>s 
are not declarations. They should be, and they should hide the entry 
from all visibility within themselves.&nbsp;</div>
<div class="paranum">18.n</div>
<div class="Annotations">Note that we can't generalize this to <SPAN Class="swiss">entry_bodies</SPAN>, 
or other bodies, because the <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
of a body is not supposed to contain (explicit) homographs of things 
in the declaration. It works for <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0201">accept_statement</A></SPAN>s 
only because an <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0201">accept_statement</A></SPAN> 
does not have a <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN>.</div>
<div class="paranum">18.o</div>
<div class="Annotations">To avoid confusion, we use the term &ldquo;local 
to&rdquo; only informally in Ada 95. Even RM83 used the term incorrectly 
(see, for example, RM83-12.3(13)).</div>
<div class="paranum">18.p</div>
<div class="Annotations">In Ada 83, (root) library units were inside 
Standard; it was not clear whether the declaration or body of Standard 
was meant. In Ada 95, they are children of Standard, and so occur immediately 
within Standard's declarative region, but not within either the declaration 
or the body. (See RM83-8.6(2) and RM83-10.1.1(5).)&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum">18.q/2</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
<SPAN Class="swiss"><A HREF="AA-6-5.html#S0170">Extended_return_statement</A></SPAN> 
(see <A HREF="AA-6-5.html">6.5</A>) is added to the list of constructs 
that have a declarative region.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
