<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Operational and Representation Items</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.SmallBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-13.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-13-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>13.1 Operational and Representation Items</H1>
<div class="paranum">0.1/1</div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
[Representation and operational items can be used to specify aspects 
of entities. Two kinds of aspects of entities can be specified: aspects 
of representation and operational aspects. Representation items specify 
how the types and other entities of the language are to be mapped onto 
the underlying machine. Operational items specify other properties of 
entities.]</div>
<div class="paranum">1/1</div>
<div class="Normal">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>representation item</I>}</SPAN> <A NAME="I4741"></A><SPAN STYLE="font-size: 80%">{<I>representation 
pragma</I> [distributed]}</SPAN> <A NAME="I4742"></A><SPAN STYLE="font-size: 80%">{<I>pragma, 
representation</I> [distributed]}</SPAN> <A NAME="I4743"></A>There are 
six kinds of <I>representation items</I>: <SPAN Class="swiss"><A HREF="AA-13-3.html#S0286">attribute_definition_clause</A></SPAN>s 
for representation attributes, <SPAN Class="swiss"><A HREF="AA-13-4.html#S0287">enumeration_representation_clause</A></SPAN>s, 
<SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0289">record_representation_clause</A></SPAN>s, 
<SPAN Class="swiss"><A HREF="AA-J-7.html#S0298">at_clause</A></SPAN>s, 
<SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0290">component_clause</A></SPAN>s, 
and <I>representation pragmas</I>. [ They can be provided to give more 
efficient representation or to interface with features that are outside 
the domain of the language (for example, peripheral hardware). ]</div>
<div class="paranum">1.1/1</div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
An <SPAN STYLE="font-size: 80%">{<I>operational item</I>}</SPAN> <A NAME="I4744"></A><I>operational 
item</I> is an <SPAN Class="swiss"><A HREF="AA-13-3.html#S0286">attribute_definition_clause</A></SPAN> 
for an operational attribute.</div>
<div class="paranum">1.2/1</div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
[An operational item or a representation item applies to an entity identified 
by a <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN>, 
which denotes an entity declared local to the current declarative region, 
or a library unit declared immediately preceding a representation pragma 
in a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0228">compilation</A></SPAN>.] 
</div>

<H4 Class="centered">Language Design Principles</H4>
<div class="paranum">1.a.1/1</div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
Aspects of representation are intended to refer to properties that need 
to be known before the compiler can generate code to create or access 
an entity. For instance, the size of an object needs to be known before 
the object can be created. Conversely, operational aspects are those 
that only need to be known before they can be used. For instance, how 
an object is read from a stream only needs to be known when a stream 
read is executed. Thus, aspects of representation have stricter rules 
as to when they can be specified.</div>
<div class="paranum">1.a.2/2</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
Confirming the value of an aspect with an operational or representation 
item should never change the semantics of the aspect. Thus Size = 8 (for 
example) means the same thing whether it was specified with a representation 
item or whether the compiler chose this value by default.&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum">2/1</div>
<div class="Indented1">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
<SPAN Class="swiss">aspect_clause</SPAN><A NAME="I4745"></A><A NAME="S0283"></A><A NAME="S0284"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4746"></A><SPAN Class="swiss"><A HREF="AA-13-3.html#S0286">attribute_definition_clause</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I4747"></A><SPAN Class="swiss"><A HREF="AA-13-4.html#S0287">enumeration_representation_clause</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I4748"></A><SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0289">record_representation_clause</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I4749"></A><SPAN Class="swiss"><A HREF="AA-J-7.html#S0298">at_clause</A></SPAN></div>
<div class="paranum">3</div>
<div class="Indented1"><SPAN Class="swiss">local_name</SPAN><A NAME="I4750"></A><A NAME="S0285"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4751"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I4752"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN>'<A NAME="I4753"></A><SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0101">attribute_designator</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<I>library_unit_</I><A NAME="I4754"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN></div>
<div class="paranum">4/1</div>
<div class="Indented1">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
A representation pragma is allowed only at places where an <SPAN Class="swiss"><A HREF="AA-13-1.html#S0283">aspect_clause</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN> 
is allowed. <SPAN STYLE="font-size: 80%">{<I>representation_clause: See 
aspect_clause</I>}</SPAN> <A NAME="I4755"></A></div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum">5/1</div>
<div class="Normal">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
In an operational item or representation item, if the <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN>, 
then it shall resolve to denote a declaration (or, in the case of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>, 
one or more declarations) that occurs immediately within the same declarative 
region as the item. If the <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
has an <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0101">attribute_designator</A></SPAN>, 
then it shall resolve to denote an implementation-defined component (see 
<A HREF="AA-13-5-1.html">13.5.1</A>) or a class-wide type implicitly 
declared immediately within the same declarative region as the item. 
A <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
that is a <I>library_unit_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
(only permitted in a representation pragma) shall resolve to denote the 
<SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN> 
that immediately precedes (except for other pragmas) the representation 
pragma.&nbsp;</div>
<div class="paranum">5.a/1</div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
This is a Name Resolution Rule, because we don't want an operational 
or representation item for X to be ambiguous just because there's another 
X declared in an outer declarative region. It doesn't make much difference, 
since most operational or representation items are for types or subtypes, 
and type and subtype names can't be overloaded.&nbsp;</div>
<div class="paranum">5.b/1</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
The visibility rules imply that the declaration has to occur before the 
operational or representation item.</div>
<div class="paranum">5.c/1</div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
For objects, this implies that operational or representation items can 
be applied only to stand-alone objects.&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum">6/1</div>
<div class="Normal">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
The <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-13-1.html#S0283">aspect_clause</A></SPAN> 
or representation pragma shall statically denote an entity (or, in the 
case of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>, 
one or more entities) declared immediately preceding it in a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0228">compilation</A></SPAN>, 
or within the same <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-7-1.html#S0174">package_specification</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-9-1.html#S0190">task_definition</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-9-4.html#S0195">protected_definition</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="AA-3-8.html#S0067">record_definition</A></SPAN> 
as the representation or operational item. If a <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
denotes a [local] callable entity, it may do so through a [local] <SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0186">subprogram_renaming_declaration</A></SPAN> 
[(as a way to resolve ambiguity in the presence of overloading)]; otherwise, 
the <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
shall not denote a <SPAN Class="swiss"><A HREF="AA-8-5.html#S0182">renaming_declaration</A></SPAN>. 
</div>
<div class="paranum">6.a</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The &ldquo;statically denote&rdquo; 
part implies that it is impossible to specify the representation of an 
object that is not a stand-alone object, except in the case of a representation 
item like pragma Atomic that is allowed inside a <SPAN Class="swiss"><A HREF="AA-3-8.html#S0068">component_list</A></SPAN> 
(in which case the representation item specifies the representation of 
components of all objects of the type). It also prevents the problem 
of renamings of things like &ldquo;P.<B>all</B>&rdquo; (where P is an 
access-to-subprogram value) or &ldquo;E(I)&rdquo; (where E is an entry 
family).</div>
<div class="paranum">6.b</div>
<div class="Annotations">The part about where the denoted entity has 
to have been declared appears twice &mdash; once as a Name Resolution 
Rule, and once as a Legality Rule. Suppose P renames Q, and we have a 
representation item in a <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
whose <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
is P. The fact that the representation item has to appear in the same 
<SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
as P is a Name Resolution Rule, whereas the fact that the representation 
item has to appear in the same <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
as Q is a Legality Rule. This is subtle, but it seems like the least 
confusing set of rules.&nbsp;</div>
<div class="paranum">6.c</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>A separate Legality Rule 
applies for <SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0290">component_clause</A></SPAN>s. 
See <A HREF="AA-13-5-1.html">13.5.1</A>, &ldquo;<A HREF="AA-13-5-1.html">Record 
Representation Clauses</A>&rdquo;.&nbsp;</div>
<div class="paranum">7/2</div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>representation of an object</I>}</SPAN> 
<A NAME="I4756"></A><SPAN STYLE="font-size: 80%">{<I>size (of an object)</I>}</SPAN> 
<A NAME="I4757"></A>The <I>representation</I> of an object consists of 
a certain number of bits (the <I>size</I> of the object). For an object 
of an elementary type, these are the bits that are normally read or updated 
by the machine code when loading, storing, or operating-on the value 
of the object. For an object of a composite type, these are the bits 
reserved for this object, and include bits occupied by subcomponents 
of the object. If the size of an object is greater than that of its subtype, 
the additional bits are padding bits. <SPAN STYLE="font-size: 80%">{<I>padding 
bits</I>}</SPAN> <A NAME="I4758"></A>For an elementary object, these 
padding bits are normally read and updated along with the others. For 
a composite object, padding bits might not be read or updated in any 
given composite operation, depending on the implementation.</div>
<div class="paranum">7.a/2</div>
<div class="Annotations"><B>To be honest:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
{<I>contiguous representation</I> [partial]} <A NAME="I4759"></A>{<I>discontiguous 
representation</I> [partial]} <A NAME="I4760"></A>Discontiguous representations 
are allowed, but the ones we're interested in here are generally contiguous 
sequences of bits. For a discontiguous representation, the size doesn't 
necessarily describe the &ldquo;footprint&rdquo; of the object in memory 
(that is, the amount of space taken in the address space for the object). 
</div>
<div class="paranum">7.a.1/2</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
In the case of composite objects, we want the implementation to have 
the flexibility to either do operations component-by-component, or with 
a block operation covering all of the bits. We carefully avoid giving 
a preference in the wording. There is no requirement for the choice to 
be documented, either, as the implementation can make that choice based 
on many factors, and could make a different choice for different operations 
on the same object.</div>
<div class="paranum">7.a.2/2</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
In the case of a properly aligned, contiguous object whose size is a 
multiple of the storage unit size, no other bits should be read or updated 
as part of operating on the object. We don't say this normatively because 
it would be difficult to normatively define &ldquo;properly aligned&rdquo; 
or &ldquo;contiguous&rdquo;.&nbsp;</div>
<div class="paranum">7.b</div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Ramification: 
</B>Two objects with the same value do not necessarily have the same 
representation. For example, an implementation might represent False 
as zero and True as any odd value. Similarly, two objects (of the same 
type) with the same sequence of bits do not necessarily have the same 
value. For example, an implementation might use a biased representation 
in some cases but not others:&nbsp;</div>
<div class="paranum">7.c</div>
<div class="SmallExamples"><B>subtype</B>&nbsp;S&nbsp;<B>is</B>&nbsp;Integer&nbsp;<B>range</B>&nbsp;1..256;<BR>
<B>type</B>&nbsp;A&nbsp;<B>is</B>&nbsp;<B>array</B>(Natural&nbsp;<B>range</B>&nbsp;1..4)&nbsp;<B>of</B>&nbsp;S;<BR>
<B>pragma</B>&nbsp;Pack(A);<BR>
X&nbsp;:&nbsp;S&nbsp;:=&nbsp;3;<BR>
Y&nbsp;:&nbsp;A&nbsp;:=&nbsp;(1,&nbsp;2,&nbsp;3,&nbsp;4);</div>
<div class="paranum">7.d</div>
<div class="Annotations">The implementation might use a biased-by-1 representation 
for the array elements, but not for X. X and Y(3) have the same value, 
but different representation: the representation of X is a sequence of 
(say) 32 bits: 0...011, whereas the representation of Y(3) is a sequence 
of 8 bits: 00000010 (assuming a two's complement representation).</div>
<div class="paranum">7.e</div>
<div class="Annotations">Such tricks are not required, but are allowed. 
</div>
<div class="paranum">7.f</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The value of any padding 
bits is not specified by the language, though for a numeric type, it 
will be much harder to properly implement the predefined operations if 
the padding bits are not either all zero, or a sign extension.&nbsp;</div>
<div class="paranum">7.g</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>For example, suppose S'Size 
= 2, and an object X is of subtype S. If the machine code typically uses 
a 32-bit load instruction to load the value of X, then X'Size should 
be 32, even though 30 bits of the value are just zeros or sign-extension 
bits. On the other hand, if the machine code typically masks out those 
30 bits, then X'Size should be 2. Usually, such masking only happens 
for components of a composite type for which packing, Component_Size, 
or record layout is specified.</div>
<div class="paranum">7.h</div>
<div class="Annotations">Note, however, that the formal parameter of 
an instance of Unchecked_Conversion is a special case. Its Size is required 
to be the same as that of its subtype.</div>
<div class="paranum">7.i</div>
<div class="Annotations">Note that we don't generally talk about the 
representation of a value. A value is considered to be an amorphous blob 
without any particular representation. An object is considered to be 
more concrete.&nbsp;</div>
<div class="paranum">8</div>
<div class="Normal"><SPAN STYLE="font-size: 80%">{<I>aspect of representation</I> 
[distributed]}</SPAN> <A NAME="I4761"></A><SPAN STYLE="font-size: 80%">{<I>representation 
aspect</I>}</SPAN> <A NAME="I4762"></A><SPAN STYLE="font-size: 80%">{<I>directly 
specified (of an aspect of representation of an entity)</I>}</SPAN> <A NAME="I4763"></A>A 
representation item <I>directly specifies</I> an <I>aspect of representation</I> 
of the entity denoted by the <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN>, 
except in the case of a type-related representation item, whose <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
shall denote a first subtype, and which directly specifies an aspect 
of the subtype's type. <SPAN STYLE="font-size: 80%">{<I>type-related 
(representation item)</I> [distributed]}</SPAN> <A NAME="I4764"></A><SPAN STYLE="font-size: 80%">{<I>subtype-specific 
(of a representation item)</I> [distributed]}</SPAN> <A NAME="I4765"></A><SPAN STYLE="font-size: 80%">{<I>type-related 
(aspect)</I> [distributed]}</SPAN> <A NAME="I4766"></A><SPAN STYLE="font-size: 80%">{<I>subtype-specific 
(of an aspect)</I> [distributed]}</SPAN> <A NAME="I4767"></A>A representation 
item that names a subtype is either <I>subtype-specific</I> (Size and 
Alignment clauses) or <I>type-related</I> (all others). [Subtype-specific 
aspects may differ for different subtypes of the same type.]&nbsp;</div>
<div class="paranum">8.a</div>
<div class="Annotations"><B>To be honest:&nbsp;</B><I>Type-related</I> and 
<I>subtype-specific</I> are defined likewise for the corresponding aspects 
of representation.&nbsp;</div>
<div class="paranum">8.b</div>
<div class="Annotations"><B>To be honest:&nbsp;</B>Some representation items 
directly specify more than one aspect.&nbsp;</div>
<div class="paranum">8.c</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>For example, a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Export specifies the convention of an entity, and also specifies that 
it is exported.&nbsp;</div>
<div class="paranum">8.d</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Each specifiable attribute 
constitutes a separate aspect. An <SPAN Class="swiss"><A HREF="AA-13-4.html#S0287">enumeration_representation_clause</A></SPAN> 
specifies the coding aspect. A <SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0289">record_representation_clause</A></SPAN> 
(without the <SPAN Class="swiss"><A HREF="AA-J-8.html#S0299">mod_clause</A></SPAN>) 
specifies the record layout aspect. Each representation pragma specifies 
a separate aspect.&nbsp;</div>
<div class="paranum">8.e</div>
<div class="Annotations"><B>Reason:&nbsp;</B>We don't need to say that an 
<SPAN Class="swiss"><A HREF="AA-J-7.html#S0298">at_clause</A></SPAN> 
or a <SPAN Class="swiss"><A HREF="AA-J-8.html#S0299">mod_clause</A></SPAN> 
specify separate aspects, because these are equivalent to <SPAN Class="swiss"><A HREF="AA-13-3.html#S0286">attribute_definition_clause</A></SPAN>s. 
See <A HREF="AA-J-7.html">J.7</A>, &ldquo;<A HREF="AA-J-7.html">At Clauses</A>&rdquo;, 
and <A HREF="AA-J-8.html">J.8</A>, &ldquo;<A HREF="AA-J-8.html">Mod Clauses</A>&rdquo;. 
</div>
<div class="paranum">8.f</div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Ramification: 
</B>The following representation items are type-related:&nbsp;</div>
<div class="paranum">8.g</div>
<div class="SmallBulleted"><SPAN Class="swiss"><A HREF="AA-13-4.html#S0287">enumeration_representation_clause</A></SPAN></div>
<div class="paranum">8.h</div>
<div class="SmallBulleted"><SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0289">record_representation_clause</A></SPAN></div>
<div class="paranum">8.i</div>
<div class="SmallBulleted">Component_Size clause</div>
<div class="paranum">8.j/1</div>
<div class="SmallBulleted"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
</div>
<div class="paranum">8.k</div>
<div class="SmallBulleted">Small clause</div>
<div class="paranum">8.l</div>
<div class="SmallBulleted">Bit_Order clause</div>
<div class="paranum">8.m</div>
<div class="SmallBulleted">Storage_Pool clause</div>
<div class="paranum">8.n</div>
<div class="SmallBulleted">Storage_Size clause</div>
<div class="paranum">8.n.1/2</div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00270.TXT">AI95-00270-01</A></I>} 
Stream_Size clause</div>
<div class="paranum">8.o/1</div>
<div class="SmallBulleted"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
</div>
<div class="paranum">8.p/1</div>
<div class="SmallBulleted"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
</div>
<div class="paranum">8.q/1</div>
<div class="SmallBulleted"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
</div>
<div class="paranum">8.r/1</div>
<div class="SmallBulleted"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
</div>
<div class="paranum">8.s</div>
<div class="SmallBulleted">Machine_Radix clause</div>
<div class="paranum">8.t</div>
<div class="SmallBulleted">pragma Pack</div>
<div class="paranum">8.u</div>
<div class="SmallBulleted">pragmas Import, Export, and Convention (when 
applied to a type)</div>
<div class="paranum">8.v</div>
<div class="SmallBulleted">pragmas Atomic and Volatile (when applied 
to a type)</div>
<div class="paranum">8.w</div>
<div class="SmallBulleted">pragmas Atomic_Components and Volatile_Components 
(when applied to an array type)</div>
<div class="paranum">8.x</div>
<div class="SmallBulleted">pragma Discard_Names (when applied to an enumeration 
or tagged type)&nbsp;</div>
<div class="paranum">8.y</div>
<div class="Annotations" style="margin-bottom: 0.4em">The following 
representation items are subtype-specific:&nbsp;</div>
<div class="paranum">8.z</div>
<div class="SmallBulleted">Alignment clause (when applied to a first 
subtype)</div>
<div class="paranum">8.aa</div>
<div class="SmallBulleted">Size clause (when applied to a first subtype) 
</div>
<div class="paranum">8.bb</div>
<div class="Annotations" style="margin-bottom: 0.4em">The following 
representation items do not apply to subtypes, so they are neither type-related 
nor subtype-specific:&nbsp;</div>
<div class="paranum">8.cc</div>
<div class="SmallBulleted">Address clause (applies to objects and program 
units)</div>
<div class="paranum">8.dd</div>
<div class="SmallBulleted">Alignment clause (when applied to an object)</div>
<div class="paranum">8.ee</div>
<div class="SmallBulleted">Size clause (when applied to an object)</div>
<div class="paranum">8.ff</div>
<div class="SmallBulleted">pragmas Import, Export, and Convention (when 
applied to anything other than a type)</div>
<div class="paranum">8.gg</div>
<div class="SmallBulleted">pragmas Atomic and Volatile (when applied 
to an object or a component)</div>
<div class="paranum">8.hh</div>
<div class="SmallBulleted">pragmas Atomic_Components and Volatile_Components 
(when applied to an array object)</div>
<div class="paranum">8.ii</div>
<div class="SmallBulleted">pragma Discard_Names (when applied to an exception)</div>
<div class="paranum">8.jj</div>
<div class="SmallBulleted">pragma Asynchronous (applies to procedures)</div>
<div class="paranum">8.kk/2</div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
pragma No_Return (applies to procedures)&nbsp;</div>
<div class="paranum">8.1/1</div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
An operational item <I>directly specifies</I> an <I>operational aspect</I> 
of the type of the subtype denoted by the <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN>. 
The <SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
of an operational item shall denote a first subtype. An operational item 
that names a subtype is type-related. <SPAN STYLE="font-size: 80%">{<I>operational 
aspect</I> [distributed]}</SPAN> <A NAME="I4768"></A><SPAN STYLE="font-size: 80%">{<I>directly 
specified (of an operational aspect of an entity)</I>}</SPAN> <A NAME="I4769"></A><SPAN STYLE="font-size: 80%">{<I>type-related 
(operational item)</I> [distributed]}</SPAN> <A NAME="I4770"></A><SPAN STYLE="font-size: 80%">{<I>type-related 
(aspect)</I> [partial]}</SPAN> <A NAME="I4771"></A></div>
<div class="paranum">8.ll/1</div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Ramification: 
</B>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} {<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
The following operational items are type-related:&nbsp;</div>
<div class="paranum">8.mm/1</div>
<div class="SmallBulleted">External_Tag clause</div>
<div class="paranum">8.nn/1</div>
<div class="SmallBulleted">Read clause</div>
<div class="paranum">8.oo/1</div>
<div class="SmallBulleted">Write clause</div>
<div class="paranum">8.pp/1</div>
<div class="SmallBulleted">Input clause</div>
<div class="paranum">8.qq/1</div>
<div class="SmallBulleted">Output clause</div>
<div class="paranum">9</div>
<div class="Normal">A representation item that directly specifies an 
aspect of a subtype or type shall appear after the type is completely 
defined (see <A HREF="AA-3-11-1.html">3.11.1</A>), and before the subtype 
or type is frozen (see <A HREF="AA-13-14.html">13.14</A>). If a representation 
item is given that directly specifies an aspect of an entity, then it 
is illegal to give another representation item that directly specifies 
the same aspect of the entity.&nbsp;</div>
<div class="paranum">9.a/1</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
The fact that a representation item (or operational item, see next paragraph) 
that directly specifies an aspect of an entity is required to appear 
before the entity is frozen prevents changing the representation of an 
entity after using the entity in ways that require the representation 
to be known.&nbsp;</div>
<div class="paranum">9.1/1</div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
An operational item that directly specifies an aspect of a type shall 
appear before the type is frozen (see <A HREF="AA-13-14.html">13.14</A>). 
If an operational item is given that directly specifies an aspect of 
a type, then it is illegal to give another operational item that directly 
specifies the same aspect of the type.&nbsp;</div>
<div class="paranum">9.a.1/1</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Unlike representation items, 
operational items can be specified on partial views. Since they don't 
affect the representation, the full declaration need not be known to 
determine their legality.&nbsp;</div>
<div class="paranum">10</div>
<div class="Normal">For an untagged derived type, no type-related representation 
items are allowed if the parent type is a by-reference type, or has any 
user-defined primitive subprograms.&nbsp;</div>
<div class="paranum">10.a/1</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
On the other hand, subtype-specific representation items may be given 
for the first subtype of such a type, as can operational items.&nbsp;</div>
<div class="paranum">10.b</div>
<div class="Annotations"><B>Reason:&nbsp;</B>The reason for forbidding type-related 
representation items on untagged by-reference types is because a change 
of representation is impossible when passing by reference (to an inherited 
subprogram). The reason for forbidding type-related representation items 
on untagged types with user-defined primitive subprograms was to prevent 
implicit change of representation for type-related aspects of representation 
upon calling inherited subprograms, because such changes of representation 
are likely to be expensive at run time. Changes of subtype-specific representation 
attributes, however, are likely to be cheap. This rule is not needed 
for tagged types, because other rules prevent a type-related representation 
item from changing the representation of the parent part; we want to 
allow a type-related representation item on a type extension to specify 
aspects of the extension part. For example, a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Pack will cause packing of the extension part, but not of the parent 
part.&nbsp;</div>
<div class="paranum">11/2</div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
{<I><A HREF="defect1.html#8652/0011">8652/0011</A></I>} {<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00117.TXT">AI95-00117-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00326.TXT">AI95-00326-01</A></I>} 
Operational and representation aspects of a generic formal parameter 
are the same as those of the actual. Operational and representation aspects 
are the same for all views of a type. A type-related representation item 
is not allowed for a descendant of a generic formal untagged type.&nbsp;</div>
<div class="paranum">11.a/1</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
Representation items are allowed for types whose subcomponent types or 
index subtypes are generic formal types. Operational items and subtype-related 
representation items are allowed on descendants of generic formal types. 
</div>
<div class="paranum">11.b</div>
<div class="Annotations"><B>Reason:&nbsp;</B>Since it is not known whether 
a formal type has user-defined primitive subprograms, specifying type-related 
representation items for them is not allowed, unless they are tagged 
(in which case only the extension part is affected in any case).&nbsp;</div>
<div class="paranum">11.c/2</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00326.TXT">AI95-00326-01</A></I>} 
All views of a type, including the incomplete and partial views, have 
the same operational and representation aspects. That's important so 
that the properties don't change when changing views. While most aspects 
are not available for an incomplete view, we don't want to leave any 
holes by not saying that they are the same.&nbsp;</div>
<div class="paranum">12</div>
<div class="Normal">A representation item that specifies the Size for 
a given subtype, or the size or storage place for an object (including 
a component) of a given subtype, shall allow for enough storage space 
to accommodate any value of the subtype.</div>
<div class="paranum">13/1</div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
A representation or operational item that is not supported by the implementation 
is illegal, or raises an exception at run time.</div>
<div class="paranum">13.1/2</div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
A <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN> 
is illegal if it has one or more progenitors, and a representation item 
applies to an ancestor, and this representation item conflicts with the 
representation of some other ancestor. The cases that cause conflicts 
are implementation defined.&nbsp;</div>
<div class="paranum">13.a/2</div>
<div class="Annotations"><B>Implementation defined:&nbsp;</B>The cases that 
cause conflicts between the representation of the ancestors of a <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN>.</div>
<div class="paranum">13.b/2</div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Reason:&nbsp;</B>This 
rule is needed because it may be the case that only the combination of 
types in a type declaration causes a conflict. Thus it is not possible, 
in general, to reject the original representation item. For instance: 
</div>
<div class="paranum">13.c/2</div>
<div class="SmallExamples"><B>package</B>&nbsp;Pkg1&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Ifc&nbsp;<B>is&nbsp;interface</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is&nbsp;tagged&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fld&nbsp;:&nbsp;Integer;<BR>
&nbsp;&nbsp;&nbsp;<B>end&nbsp;record</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>for</B>&nbsp;T&nbsp;<B>use&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fld&nbsp;<B>at</B>&nbsp;0&nbsp;<B>range</B>&nbsp;0&nbsp;..&nbsp;Integer'Size&nbsp;-&nbsp;1;<BR>
&nbsp;&nbsp;&nbsp;<B>end&nbsp;record</B>;<BR>
<B>end</B>&nbsp;Pkg1;</div>
<div class="paranum">13.d/2</div>
<div class="Annotations" style="margin-bottom: 0.4em">Assume the implementation 
uses a single tag with a default offset of zero, and that it allows the 
use of non-default locations for the tag (and thus accepts representation 
items like the one above). The representation item will force a non-default 
location for the tag (by putting a component other than the tag into 
the default location). Clearly, this package will be accepted by the 
implementation. However, other declarations could cause trouble. For 
instance, the implementation could reject:&nbsp;</div>
<div class="paranum">13.e/2</div>
<div class="SmallExamples"><B>with</B>&nbsp;Pkg1;<BR>
<B>package</B>&nbsp;Pkg2&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;NewT&nbsp;<B>is&nbsp;new</B>&nbsp;Pkg1.T&nbsp;<B>and</B>&nbsp;Pkg1.Ifc&nbsp;<B>with&nbsp;null&nbsp;record</B>;<BR>
<B>end</B>&nbsp;Pkg2;</div>
<div class="paranum">13.f/2</div>
<div class="Annotations">because the declarations of T and Ifc have a 
conflict in their representation items. This is clearly necessary (it's 
hard to imagine how Ifc'Class could work with the tag at a location other 
than the one it is expecting).</div>
<div class="paranum">13.g/2</div>
<div class="Annotations">Conflicts will usually involve implementation-defined 
attributes (for specifying the location of the tag, for instance), although 
the example above shows that doesn't have to be the case. For this reason, 
we didn't try to specify exactly what causes a conflict; it will depend 
on the implementation's implementation model and what representation 
items it allows.&nbsp;</div>
<div class="paranum">13.h/2</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>An implementation 
can only use this rule to reject <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN>s 
where one its ancestors has a representation item. An implementation 
must ensure that the default representations of ancestors cannot conflict. 
</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum">14</div>
<div class="Normal">If two subtypes statically match, then their subtype-specific 
aspects (Size and Alignment) are the same. <SPAN STYLE="font-size: 80%">{<I>statically 
matching (effect on subtype-specific aspects)</I> [partial]}</SPAN> <A NAME="I4772"></A></div>
<div class="paranum">14.a</div>
<div class="Annotations"><B>Reason:&nbsp;</B>This is necessary because we 
allow (for example) conversion between access types whose designated 
subtypes statically match. Note that it is illegal to specify an aspect 
(including a subtype-specific one) for a nonfirst subtype.</div>
<div class="paranum">14.b</div>
<div class="Annotations" style="margin-bottom: 0.4em">Consider, for 
example:&nbsp;</div>
<div class="paranum">14.c/1</div>
<div class="SmallExamples"><B>package</B>&nbsp;P1&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>subtype</B>&nbsp;S1&nbsp;<B>is</B>&nbsp;Integer&nbsp;<B>range</B>&nbsp;0..2**16-1;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>for</B>&nbsp;S1'Size&nbsp;<B>use</B>&nbsp;16;&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;S1'Size&nbsp;would&nbsp;be&nbsp;16&nbsp;by&nbsp;default.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;A1&nbsp;<B>is</B>&nbsp;<B>access</B>&nbsp;<B>all</B>&nbsp;S1;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;X1:&nbsp;A1;<BR>
<B>end</B>&nbsp;P1;</div>
<div class="paranum">14.d/1</div>
<div class="SmallExamples"><B>package</B>&nbsp;P2&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>subtype</B>&nbsp;S2&nbsp;<B>is</B>&nbsp;Integer&nbsp;<B>range</B>&nbsp;0..2**16-1;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>for</B>&nbsp;S2'Size&nbsp;<B>use</B>&nbsp;32;&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;A2&nbsp;<B>is</B>&nbsp;<B>access</B>&nbsp;<B>all</B>&nbsp;S2;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;X2:&nbsp;A2;<BR>
<B>end</B>&nbsp;P2;</div>
<div class="paranum">14.e/1</div>
<div class="SmallExamples"><B>procedure</B>&nbsp;Q&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>use</B>&nbsp;P1,&nbsp;P2;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Array1&nbsp;<B>is</B>&nbsp;<B>array</B>(Integer&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;<B>aliased</B>&nbsp;S1;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Pack(Array1);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Obj1:&nbsp;Array1(1..100);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Array2&nbsp;<B>is</B>&nbsp;<B>array</B>(Integer&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;<B>aliased</B>&nbsp;S2;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Pack(Array2);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Obj2:&nbsp;Array2(1..100);<BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;X1&nbsp;:=&nbsp;Obj2(17)'Unchecked_Access;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;X2&nbsp;:=&nbsp;Obj1(17)'Unchecked_Access;<BR>
<B>end</B>&nbsp;Q;</div>
<div class="paranum">14.f</div>
<div class="Annotations">Loads and stores through X1 would read and write 
16 bits, but X1 points to a 32-bit location. Depending on the endianness 
of the machine, loads might load the wrong 16 bits. Stores would fail 
to zero the other half in any case.</div>
<div class="paranum">14.g</div>
<div class="Annotations">Loads and stores through X2 would read and write 
32 bits, but X2 points to a 16-bit location. Thus, adjacent memory locations 
would be trashed.</div>
<div class="paranum">14.h</div>
<div class="Annotations">Hence, the above is illegal. Furthermore, the 
compiler is forbidden from choosing different Sizes by default, for the 
same reason.</div>
<div class="paranum">14.i</div>
<div class="Annotations">The same issues apply to Alignment.</div>
<div class="paranum">15/1</div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0040">8652/0040</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00108.TXT">AI95-00108-01</A></I>} 
A derived type inherits each type-related aspect of representation of 
its parent type that was directly specified before the declaration of 
the derived type, or (in the case where the parent is derived) that was 
inherited by the parent type from the grandparent type. A derived subtype 
inherits each subtype-specific aspect of representation of its parent 
subtype that was directly specified before the declaration of the derived 
type, or (in the case where the parent is derived) that was inherited 
by the parent subtype from the grandparent subtype, but only if the parent 
subtype statically matches the first subtype of the parent type. An inherited 
aspect of representation is overridden by a subsequent representation 
item that specifies the same aspect of the type or subtype.&nbsp;</div>
<div class="paranum">15.a</div>
<div class="Annotations"><B>To be honest:&nbsp;</B>A <SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0289">record_representation_clause</A></SPAN> 
for a record extension does not override the layout of the parent part; 
if the layout was specified for the parent type, it is inherited by the 
record extension.&nbsp;</div>
<div class="paranum">15.b</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>If a representation item 
for the parent appears after the <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>, 
then inheritance does not happen for that representation item.&nbsp;</div>
<div class="paranum">15.1/2</div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0040">8652/0040</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00108.TXT">AI95-00108-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00444.TXT">AI95-00444-01</A></I>} 
In contrast, whether operational aspects are inherited by an untagged 
derived type depends on each specific aspect. [Operational aspects are 
never inherited for a tagged type.] When operational aspects are inherited 
by an untagged derived type, aspects that were directly specified by 
operational items that are visible at the point of the derived type declaration, 
or (in the case where the parent is derived) that were inherited by the 
parent type from the grandparent type are inherited. An inherited operational 
aspect is overridden by a subsequent operational item that specifies 
the same aspect of the type.&nbsp;</div>
<div class="paranum">15.b.1/1</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>As with representation 
items, if an operational item for the parent appears after the <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>, 
then inheritance does not happen for that operational item.&nbsp;</div>
<div class="paranum">15.b.2/2</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00444.TXT">AI95-00444-01</A></I>} 
Only untagged types inherit operational aspects. Inheritance from tagged 
types causes problems, as the different views can have different visibility 
on operational items &mdash; potentially leading to operational items 
that depend on the view. We want aspects to be the same for all views. 
Untagged types don't have this problem as plain private types don't have 
ancestors, and thus can't inherit anything. In addition, it seems unlikely 
that we'll need inheritance for tagged types, as usually we'll want to 
incorporate the parent's operation into a new one that also handles any 
extension components.&nbsp;</div>
<div class="paranum">15.2/2</div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00444.TXT">AI95-00444-01</A></I>} 
When an aspect that is a subprogram is inherited, the derived type inherits 
the aspect in the same way that a derived type inherits a user-defined 
primitive subprogram from its parent (see <A HREF="AA-3-4.html">3.4</A>). 
</div>
<div class="paranum">15.c/2</div>
<div class="Annotations"><B>Reason:&nbsp;</B>This defines the parameter names 
and types, and the needed implicit conversions.&nbsp;</div>
<div class="paranum">16</div>
<div class="Normal" style="margin-bottom: 0.4em">Each aspect of representation 
of an entity is as follows:&nbsp;</div>
<div class="paranum">17</div>
<div class="Bulleted"><SPAN STYLE="font-size: 80%">{<I>specified (of 
an aspect of representation of an entity)</I>}</SPAN> <A NAME="I4773"></A>If 
the aspect is <I>specified</I> for the entity, meaning that it is either 
directly specified or inherited, then that aspect of the entity is as 
specified, except in the case of Storage_Size, which specifies a minimum. 
</div>
<div class="paranum">17.a</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This rule implies that 
queries of the aspect return the specified value. For example, if the 
user writes &ldquo;<B>for</B> X'Size <B>use</B> 32;&rdquo;, then a query 
of X'Size will return 32.&nbsp;</div>
<div class="paranum">18</div>
<div class="Bulleted"><SPAN STYLE="font-size: 80%">{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I4774"></A>If an aspect of representation 
of an entity is not specified, it is chosen by default in an unspecified 
manner.&nbsp;</div>
<div class="paranum">18.a/1</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
Note that representation items can affect the semantics of the entity.</div>
<div class="paranum">18.b</div>
<div class="Annotations">The rules forbid things like &ldquo;<B>for</B> 
S'Base'Alignment <B>use</B> ...&rdquo; and &ldquo;<B>for</B> S'Base <B>use</B> 
record ...&rdquo;.&nbsp;</div>
<div class="paranum">18.c</div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The intent is that implementations 
will represent the components of a composite value in the same way for 
all subtypes of a given composite type. Hence, Component_Size and record 
layout are type-related aspects.&nbsp;</div>
<div class="paranum">18.1/1</div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0040">8652/0040</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00108.TXT">AI95-00108-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>specified (of an operational aspect 
of an entity)</I>}</SPAN> <A NAME="I4775"></A>If an operational aspect 
is <I>specified</I> for an entity (meaning that it is either directly 
specified or inherited), then that aspect of the entity is as specified. 
Otherwise, the aspect of the entity has the default value for that aspect.</div>
<div class="paranum">18.2/2</div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
A representation item that specifies an aspect of representation that 
would have been chosen in the absence of the representation item is said 
to be <I>confirming</I>.<SPAN STYLE="font-size: 80%">{<I>confirming (representation 
item)</I>}</SPAN> <A NAME="I4776"></A></div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum">19/1</div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>elaboration (aspect_clause)</I> [partial]}</SPAN> 
<A NAME="I4777"></A>For the elaboration of an <SPAN Class="swiss"><A HREF="AA-13-1.html#S0283">aspect_clause</A></SPAN>, 
any evaluable constructs within it are evaluated.&nbsp;</div>
<div class="paranum">19.a</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Elaboration of representation 
pragmas is covered by the general rules for pragmas in Section 2.&nbsp;</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum">20</div>
<div class="Normal">An implementation may interpret aspects of representation 
in an implementation-defined manner. An implementation may place implementation-defined 
restrictions on representation items. <SPAN STYLE="font-size: 80%">{<I>recommended 
level of support</I> [distributed]}</SPAN> <A NAME="I4778"></A>A <I>recommended 
level of support</I> is specified for representation items and related 
features in each subclause. These recommendations are changed to requirements 
for implementations that support the Systems Programming Annex (see <A HREF="AA-C-2.html">C.2</A>, 
&ldquo;<A HREF="AA-C-2.html">Required Representation Support</A>&rdquo;). 
</div>
<div class="paranum">20.a</div>
<div class="Annotations"><B>Implementation defined:&nbsp;</B>The interpretation 
of each aspect of representation.</div>
<div class="paranum">20.b</div>
<div class="Annotations"><B>Implementation defined:&nbsp;</B>Any restrictions 
placed upon representation items.</div>
<div class="paranum">20.c</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Implementation-defined 
restrictions may be enforced either at compile time or at run time. There 
is no requirement that an implementation justify any such restrictions. 
They can be based on avoiding implementation complexity, or on avoiding 
excessive inefficiency, for example.</div>
<div class="paranum">20.c.1/1</div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
There is no such permission for operational aspects.&nbsp;</div>

<H4 Class="centered">Implementation Advice</H4>
<div class="paranum">21</div>
<div class="Normal" style="margin-bottom: 0.4em"><SPAN STYLE="font-size: 80%">{<I>recommended 
level of support (with respect to nonstatic expressions)</I> [partial]}</SPAN> 
<A NAME="I4779"></A>The recommended level of support for all representation 
items is qualified as follows:&nbsp;</div>
<div class="paranum">21.1/2</div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
A confirming representation item should be supported.&nbsp;</div>
<div class="paranum">21.a.1/2</div>
<div class="Annotations"><B>To be honest:&nbsp;</B>A confirming representation 
item might not be possible for some entities. For instance, consider 
an unconstrained array. The size of such a type is implementation-defined, 
and might not actually be a representable value, or might not be static. 
</div>
<div class="paranum">22</div>
<div class="Bulleted">An implementation need not support representation 
items containing nonstatic expressions, except that an implementation 
should support a representation item for a given entity if each nonstatic 
expression in the representation item is a name that statically denotes 
a constant declared before the entity.&nbsp;</div>
<div class="paranum">22.a</div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Reason:&nbsp;</B>This 
is to avoid the following sort of thing:&nbsp;</div>
<div class="paranum">22.b</div>
<div class="SmallExamples">X&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;F(...);<BR>
Y&nbsp;:&nbsp;Address&nbsp;:=&nbsp;G(...);<BR>
<B>for</B>&nbsp;X'Address&nbsp;<B>use</B>&nbsp;Y;</div>
<div class="paranum">22.c</div>
<div class="Annotations">In the above, we have to evaluate the initialization 
expression for X before we know where to put the result. This seems like 
an unreasonable implementation burden.</div>
<div class="paranum">22.d</div>
<div class="Annotations" style="margin-bottom: 0.4em">The above code 
should instead be written like this:&nbsp;</div>
<div class="paranum">22.e</div>
<div class="SmallExamples">Y&nbsp;:&nbsp;<B>constant</B>&nbsp;Address&nbsp;:=&nbsp;G(...);<BR>
X&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;F(...);<BR>
<B>for</B>&nbsp;X'Address&nbsp;<B>use</B>&nbsp;Y;</div>
<div class="paranum">22.f</div>
<div class="Annotations">This allows the expression &ldquo;Y&rdquo; to 
be safely evaluated before X is created.</div>
<div class="paranum">22.g</div>
<div class="Annotations">The constant could be a formal parameter of 
mode <B>in</B>.</div>
<div class="paranum">22.h</div>
<div class="Annotations">An implementation can support other nonstatic 
expressions if it wants to. Expressions of type Address are hardly ever 
static, but their value might be known at compile time anyway in many 
cases.&nbsp;</div>
<div class="paranum">23</div>
<div class="Bulleted">An implementation need not support a specification 
for the Size for a given composite subtype, nor the size or storage place 
for an object (including a component) of a given composite subtype, unless 
the constraints on the subtype and its composite subcomponents (if any) 
are all static constraints.</div>
<div class="paranum">24/2</div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
An implementation need not support a nonconfirming representation item 
if it could cause an aliased object or an object of a by-reference type 
to be allocated at a nonaddressable location or, when the alignment attribute 
of the subtype of such an object is nonzero, at an address that is not 
an integral multiple of that alignment.&nbsp;</div>
<div class="paranum">24.a/1</div>
<div class="Annotations"><B>Reason:&nbsp;</B>The intent is that access types, 
type System.Address, and the pointer used for a by-reference parameter 
should be implementable as a single machine address &mdash; bit-field 
pointers should not be required. (There is no requirement that this implementation 
be used &mdash; we just want to make sure it's feasible.)&nbsp;</div>
<div class="paranum">24.b/2</div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
We want subprograms to be able to assume the properties of the types 
of their parameters inside of subprograms. While many objects can be 
copied to allow this (and thus do not need limitations), aliased or by-reference 
objects cannot be copied (their memory location is part of their identity). 
Thus, the above rule does not apply to types that merely allow by-reference 
parameter passing; for such types, a copy typically needs to be made 
at the call site when a bit-aligned component is passed as a parameter. 
</div>
<div class="paranum">25/2</div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
An implementation need not support a nonconfirming representation item 
if it could cause an aliased object of an elementary type to have a size 
other than that which would have been chosen by default.&nbsp;</div>
<div class="paranum">25.a/2</div>
<div class="Annotations"><B>Reason:&nbsp;</B>Since all bits of elementary 
objects participate in operations, aliased objects must not have a different 
size than that assumed by users of the access type.&nbsp;</div>
<div class="paranum">26/2</div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
An implementation need not support a nonconfirming representation item 
if it could cause an aliased object of a composite type, or an object 
whose type is by-reference, to have a size smaller than that which would 
have been chosen by default.&nbsp;</div>
<div class="paranum">26.a/2</div>
<div class="Annotations"><B>Reason:&nbsp;</B>Unlike elementary objects, there 
is no requirement that all bits of a composite object participate in 
operations. Thus, as long as the object is the same or larger in size 
than that expected by the access type, all is well.&nbsp;</div>
<div class="paranum">26.b/2</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This rule presumes that 
the implementation allocates an object of a size specified to be larger 
than the default size in such a way that access of the default size suffices 
to correctly read and write the value of the object.&nbsp;</div>
<div class="paranum">27/2</div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
An implementation need not support a nonconfirming subtype-specific representation 
item specifying an aspect of representation of an indefinite or abstract 
subtype.&nbsp;</div>
<div class="paranum">27.a/2</div>
<div class="Annotations"><B>Reason:&nbsp;</B>Aspects of representations are 
often not well-defined for such types.&nbsp;</div>
<div class="paranum">27.b/2</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
A pragma Pack will typically not pack so tightly as to disobey the above 
rules. A Component_Size clause or <SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0289">record_representation_clause</A></SPAN> 
will typically be illegal if it disobeys the above rules. Atomic components 
have similar restrictions (see <A HREF="AA-C-6.html">C.6</A>, &ldquo;<A HREF="AA-C-6.html">Shared 
Variable Control</A>&rdquo;).&nbsp;</div>
<div class="paranum">28/2</div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
For purposes of these rules, the determination of whether a representation 
item applied to a type <I>could cause</I> an object to have some property 
is based solely on the properties of the type itself, not on any available 
information about how the type is used. In particular, it presumes that 
minimally aligned objects of this type might be declared at some point. 
</div>
<div class="paranum">28.a/2</div>
<div class="Annotations"><B>Implementation Advice:&nbsp;</B>The recommended 
level of support for all representation items should be followed.</div>

<H4 Class="centered">Incompatibilities With Ada 83</H4>
<div class="paranum">28.b</div>
<div class="Annotations">{<I>incompatibilities with Ada 83</I>} <A NAME="I4780"></A>It 
is now illegal for a representation item to cause a derived by-reference 
type to have a different record layout from its parent. This is necessary 
for by-reference parameter passing to be feasible. This only affects 
programs that specify the representation of types derived from types 
containing tasks; most by-reference types are new to Ada 95. For example, 
if A1 is an array of tasks, and A2 is derived from A1, it is illegal 
to apply a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Pack to A2.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 83</H4>
<div class="paranum">28.c/1</div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
{<I>extensions to Ada 83</I>} <A NAME="I4781"></A>Ada 95 allows additional 
<SPAN Class="swiss"><A HREF="AA-13-1.html#S0283">aspect_clause</A></SPAN>s 
for objects.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<div class="paranum">28.d/1</div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
The syntax rule for <SPAN Class="swiss">type_representation_clause</SPAN> 
is removed; the right-hand side of that rule is moved up to where it 
was used, in <SPAN Class="swiss"><A HREF="AA-13-1.html#S0283">aspect_clause</A></SPAN>. 
There are two references to &ldquo;type representation clause&rdquo; 
in RM83, both in Section 13; these have been reworded. Also, the <SPAN Class="swiss">representation_clause</SPAN> 
has been renamed the <SPAN Class="swiss"><A HREF="AA-13-1.html#S0283">aspect_clause</A></SPAN> 
to reflect that it can be used to control more than just representation 
aspects.</div>
<div class="paranum">28.e/2</div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
We have defined a new term &ldquo;representation item,&rdquo; which includes 
all representation clauses and representation pragmas, as well as <SPAN Class="swiss"><A HREF="AA-13-5-1.html#S0290">component_clause</A></SPAN>s. 
This is convenient because the rules are almost identical for all of 
them. We have also defined the new terms &ldquo;operational item&rdquo; 
and &ldquo;operational aspects&rdquo; in order to conveniently handle 
new types of specifiable entities.</div>
<div class="paranum">28.f</div>
<div class="Annotations">All of the forcing occurrence stuff has been 
moved into its own subclause (see <A HREF="AA-13-14.html">13.14</A>), 
and rewritten to use the term &ldquo;freezing&rdquo;.</div>
<div class="paranum">28.g</div>
<div class="Annotations">RM83-13.1(10) requires implementation-defined 
restrictions on representation items to be enforced at compile time. 
However, that is impossible in some cases. If the user specifies a junk 
(nonstatic) address in an address clause, and the implementation chooses 
to detect the error (for example, using hardware memory management with 
protected pages), then it's clearly going to be a run-time error. It 
seems silly to call that &ldquo;semantics&rdquo; rather than &ldquo;a 
restriction.&rdquo;</div>
<div class="paranum">28.h</div>
<div class="Annotations">RM83-13.1(10) tries to pretend that <SPAN Class="swiss">representation_clause</SPAN>s 
don't affect the semantics of the program. One counter-example is the 
Small clause. Ada 95 has more counter-examples. We have noted the opposite 
above.</div>
<div class="paranum">28.i</div>
<div class="Annotations">Some of the more stringent requirements are 
moved to <A HREF="AA-C-2.html">C.2</A>, &ldquo;<A HREF="AA-C-2.html">Required 
Representation Support</A>&rdquo;.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum">28.j/2</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
{<I>extensions to Ada 95</I>} <A NAME="I4782"></A><B>Amendment Correction:</B> 
Confirming representation items are defined, and the recommended level 
of support is now that they always be supported.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum">28.k/2</div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
<B>Corrigendum:</B> Added operational items in order to eliminate unnecessary 
restrictions and permissions on stream attributes. As part of this, <SPAN Class="swiss">representation_clause</SPAN> 
was renamed to <SPAN Class="swiss"><A HREF="AA-13-1.html#S0283">aspect_clause</A></SPAN>.</div>
<div class="paranum">28.l/2</div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0009">8652/0009</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00137.TXT">AI95-00137-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00326.TXT">AI95-00326-01</A></I>} 
<B>Corrigendum:</B> Added wording to say that the partial and full views 
have the same operational and representation aspects. Ada 2005 extends 
this to cover all views, including the incomplete view.</div>
<div class="paranum">28.m/2</div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0040">8652/0040</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00108.TXT">AI95-00108-01</A></I>} 
<B>Corrigendum:</B> Changed operational items to have inheritance specified 
for each such aspect.</div>
<div class="paranum">28.n/2</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
Added wording to allow the rejection of types with progenitors that have 
conflicting representation items.</div>
<div class="paranum">28.o/2</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10291.TXT">AI95-00291-02</A></I>} 
The description of the representation of an object was clarified (with 
great difficulty reaching agreement). Added wording to say that representation 
items on aliased and by-reference objects never need be supported if 
they would not be implementable without distributed overhead even if 
other recommended level of support says otherwise. This wording matches 
the rules with reality.</div>
<div class="paranum">28.p/2</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00444.TXT">AI95-00444-01</A></I>} 
Added wording so that inheritance depends on whether operational items 
are visible rather than whether they occur before the declaration (we 
don't want to look into private parts). Limited operational inheritance 
to untagged types to avoid anomolies with private extensions (this is 
not incompatible, no existing operational attribute used this capability). 
Also added wording to clearly define that subprogram inheritance works 
like derivation of subprograms.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-13.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-13-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
