<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Exception Handlers</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-11-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-11-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>11.2 Exception Handlers</H1>
<div class="paranum">1</div>
<div class="Normal">[The response to one or more exceptions is specified 
by an <SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN>.] 
</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum">2</div>
<div class="Indented1"><SPAN Class="swiss">handled_sequence_of_statements</SPAN><A NAME="I4394"></A><A NAME="S0247"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I4395"></A><SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN><BR>
&nbsp;&nbsp;[<B>exception</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I4396"></A><SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;{<A NAME="I4397"></A><SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN>}]</div>
<div class="paranum">3</div>
<div class="Indented1"><SPAN Class="swiss">exception_handler</SPAN><A NAME="I4398"></A><A NAME="S0248"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;<B>when</B>&nbsp;[<A NAME="I4399"></A><SPAN Class="swiss"><A HREF="AA-11-2.html#S0249">choice_parameter_specification</A></SPAN>:]&nbsp;<A NAME="I4400"></A><SPAN Class="swiss"><A HREF="AA-11-2.html#S0250">exception_choice</A></SPAN>&nbsp;{|&nbsp;<A NAME="I4401"></A><SPAN Class="swiss"><A HREF="AA-11-2.html#S0250">exception_choice</A></SPAN>}&nbsp;=&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I4402"></A><SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN></div>
<div class="paranum">4</div>
<div class="Indented1"><SPAN Class="swiss">choice_parameter_specification</SPAN><A NAME="I4403"></A><A NAME="S0249"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4404"></A><SPAN Class="swiss"><A HREF="AA-3-1.html#S0022">defining_identifier</A></SPAN></div>
<div class="paranum">5</div>
<div class="Indented1"><SPAN Class="swiss">exception_choice</SPAN><A NAME="I4405"></A><A NAME="S0250"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><I>exception_</I><A NAME="I4406"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>&nbsp;|&nbsp;<B>others</B></div>
<div class="paranum">5.a</div>
<div class="Annotations"><B>To be honest:&nbsp;</B>{<I>handler</I>} <A NAME="I4407"></A>&ldquo;<I>Handler</I>&rdquo; 
is an abbreviation for &ldquo;<SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN>.&rdquo;</div>
<div class="paranum">5.b</div>
<div class="Annotations">{<I>choice (of an exception_handler)</I>} <A NAME="I4408"></A>Within 
this section, we sometimes abbreviate &ldquo;<SPAN Class="swiss"><A HREF="AA-11-2.html#S0250">exception_choice</A></SPAN>&rdquo; 
to &ldquo;<I>choice</I>.&rdquo;&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum">6</div>
<div class="Normal"><SPAN STYLE="font-size: 80%">{<I>cover (of a choice 
and an exception)</I>}</SPAN> <A NAME="I4409"></A>A choice with an <I>exception_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
<I>covers</I> the named exception. A choice with <B>others</B> covers 
all exceptions not named by previous choices of the same <SPAN Class="swiss"><A HREF="AA-11-2.html#S0247">handled_sequence_of_statements</A></SPAN>. 
Two choices in different <SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN>s 
of the same <SPAN Class="swiss"><A HREF="AA-11-2.html#S0247">handled_sequence_of_statements</A></SPAN> 
shall not cover the same exception.&nbsp;</div>
<div class="paranum">6.a</div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Two <SPAN Class="swiss"><A HREF="AA-11-2.html#S0250">exception_choice</A></SPAN>s 
of the same <SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN> 
may cover the same exception. For example, given two renaming declarations 
in separate packages for the same exception, one may nevertheless write, 
for example, &ldquo;<B>when</B> Ada.Text_IO.Data_Error | My_Seq_IO.Data_Error 
=&gt;&rdquo;.</div>
<div class="paranum">6.b</div>
<div class="Annotations">An <B>others</B> choice even covers exceptions 
that are not visible at the place of the handler. Since exception raising 
is a dynamic activity, it is entirely possible for an <B>others</B> handler 
to handle an exception that it could not have named.&nbsp;</div>
<div class="paranum">7</div>
<div class="Normal">A choice with <B>others</B> is allowed only for the 
last handler of a <SPAN Class="swiss"><A HREF="AA-11-2.html#S0247">handled_sequence_of_statements</A></SPAN> 
and as the only choice of that handler.</div>
<div class="paranum">8</div>
<div class="Normal">An <I>exception_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
of a choice shall not denote an exception declared in a generic formal 
package.&nbsp;</div>
<div class="paranum">8.a</div>
<div class="Annotations"><B>Reason:&nbsp;</B>This is because the compiler 
doesn't know the identity of such an exception, and thus can't enforce 
the coverage rules.&nbsp;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum">9</div>
<div class="Normal"><SPAN STYLE="font-size: 80%">{<I>choice parameter</I>}</SPAN> 
<A NAME="I4410"></A>A <SPAN Class="swiss"><A HREF="AA-11-2.html#S0249">choice_parameter_specification</A></SPAN> 
declares a <I>choice parameter</I>, which is a constant object of type 
Exception_Occurrence (see <A HREF="AA-11-4-1.html">11.4.1</A>). During 
the handling of an exception occurrence, the choice parameter, if any, 
of the handler represents the exception occurrence that is being handled.</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum">10</div>
<div class="Normal"><SPAN STYLE="font-size: 80%">{<I>execution (handled_sequence_of_statements)</I> 
[partial]}</SPAN> <A NAME="I4411"></A>The execution of a <SPAN Class="swiss"><A HREF="AA-11-2.html#S0247">handled_sequence_of_statements</A></SPAN> 
consists of the execution of the <SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN>. 
[The optional handlers are used to handle any exceptions that are propagated 
by the <SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN>.] 
</div>

<H4 Class="centered">Examples</H4>
<div class="paranum">11</div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Example of an exception 
handler:</I>&nbsp;</div>
<div class="paranum">12</div>
<div class="Examples"><B>begin</B><BR>
&nbsp;&nbsp;&nbsp;Open(File,&nbsp;In_File,&nbsp;&quot;input.txt&quot;);&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-A-8-2.html">A.8.2</A></I></SPAN><BR>
<B>exception</B><BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;E&nbsp;:&nbsp;Name_Error&nbsp;=&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put(&quot;Cannot&nbsp;open&nbsp;input&nbsp;file&nbsp;:&nbsp;&quot;);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put_Line(Exception_Message(E));&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-11-4-1.html">11.4.1</A></I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>raise</B>;<BR>
<B>end</B>;</div>

<H4 Class="centered">Extensions to Ada 83</H4>
<div class="paranum">12.a</div>
<div class="Annotations">{<I>extensions to Ada 83</I>} <A NAME="I4412"></A>The 
syntax rule for <SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN> 
is modified to allow a <SPAN Class="swiss"><A HREF="AA-11-2.html#S0249">choice_parameter_specification</A></SPAN>.</div>
<div class="paranum">12.b/2</div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
Different <SPAN Class="swiss"><A HREF="AA-11-2.html#S0250">exception_choice</A></SPAN>s 
of the same <SPAN Class="swiss"><A HREF="AA-11-2.html#S0248">exception_handler</A></SPAN> 
may cover the same exception. This allows for &ldquo;when Numeric_Error 
| Constraint_Error =&gt;&rdquo; even though Numeric_Error is a rename 
of Constraint_Error. This also allows one to &ldquo;with&rdquo; two different 
I/O packages, and then write, for example, &ldquo;when Ada.Text_IO.Data_Error 
| My_Seq_IO.Data_Error =&gt;&rdquo; even though these might both be renames 
of the same exception.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<div class="paranum">12.c</div>
<div class="Annotations">The syntax rule for <SPAN Class="swiss"><A HREF="AA-11-2.html#S0247">handled_sequence_of_statements</A></SPAN> 
is new. These are now used in all the places where handlers are allowed. 
This obviates the need to explain (in Sections 5, 6, 7, and 9) what portions 
of the program are handled by the handlers. Note that there are more 
such cases in Ada 95.</div>
<div class="paranum">12.d</div>
<div class="Annotations">The syntax rule for <SPAN Class="swiss"><A HREF="AA-11-2.html#S0249">choice_parameter_specification</A></SPAN> 
is new.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-11-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-11-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
