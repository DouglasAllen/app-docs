<!-- Creator     : groff version 1.21 -->
<!-- CreationDate: Sat May  5 10:27:36 2012 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ns_adp_exception</title>

</head>
<body>

<h1 align="center">ns_adp_exception</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#KEYWORDS">KEYWORDS</a><br>

<hr>



<p style="margin-top: 1em">______________________________________________________________________________</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ns_adp_abort,
ns_adp_break, ns_adp_exception, ns_adp_return &minus; ADP
exception handling</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ns_adp_abort</b>
?<i>result</i>? <b><br>
ns_adp_break</b> ?<i>result</i>? <b><br>
ns_adp_exception</b> ?<i>varName</i>? <b><br>
ns_adp_return</b> ?<i>result</i>?
_________________________________________________________________</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These commands
enable early return and interrupt of an ADP execution.
Internally, the exception routines sets a flag and return
TCL_ERROR to begin unwinding the current Tcl call stack and
return control to the ADP evaluation engine. It is possible
for an enclosing <b>catch</b> command to catch the exception
and stop Tcl from returning control to ADP. The
<b>ns_adp_exception</b> command can be used to test for this
condition. <b><br>
ns_adp_abort</b> ?<i>result</i>?</p>

<p style="margin-left:22%;">This command stops ADP
processing, raising an execution and unwinding the stack to
the top level as an error condition. The request handling
code which invokes the first ADP file will normallly
generate an error message in this case, ignoring the
contents of the output buffer, if any. Note that the
exeception can be caught by a <b>catch</b> command in script
block which executes <b>ns_adp_abort</b>. However, when that
block returns control to the ADP execution engine, the stack
will be continue to be unwound. The optional <i>result</i>
argument, if present, will be used to set the Tcl
interpreter result string.</p>

<p style="margin-left:11%;"><b>ns_adp_break</b>
?<i>result</i>?</p>

<p style="margin-left:22%;">This command stops execution of
ADP and unwinds the ADP call stack. Unlike
<b>ns_adp_abort</b>, the request handling code will generate
a normal HTTP response with any contents of the output
buffer. The optional <i>result</i> argument, if present,
will be used to set the Tcl interpreter result string.</p>

<p style="margin-left:11%;"><b>ns_adp_exception</b>
?<i>varName</i>?</p>

<p style="margin-left:22%;">This command returns a boolean
value if an exception has been raised. The optional
<i>varName</i> provides the name of a variable to store one
of <i>ok</i>, <i>break</i>, <i>abort</i>, or <i>return</i>
to indicate the type of exception raised.</p>

<p style="margin-left:11%;"><b>ns_adp_return</b>
?<i>result</i>?</p>

<p style="margin-left:22%;">This function halts processing
of the current ADP and sends any pending output (from
ns_adp_puts or static HTML) up to the point where it was
called to the browser. Nothing in the current ADP is output
or executed after it is called. The <i>return_value</i>, if
specified, becomes the return value of the ADP. Note that
this function returns only one level up the call stack. By
contrast, <b>ns_adp_abort</b> and <b>ns_adp_break</b> will
return all the way up the call stack. <b>ns_adp_return</b>
is typically used from an ADP included by another ADP, to
stop processing of the inner ADP while allowing the calling
ADP to continue. The optional <i>result</i> argument, if
present, will be used to set the Tcl interpreter result
string.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
example demonstrates halting execution of the ADP after
returning a complete response with one of the
<b>ns_return</b> style commands:</p>

<p style="margin-left:22%; margin-top: 1em">&lt;% <br>
if !$authorized {</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="3%"></td>
<td width="5%"></td>
<td width="92%">


<p>ns_returnunauthorized; # Send complete response.</p></td></tr>
<tr valign="top" align="left">
<td width="3%"></td>
<td width="5%"></td>
<td width="92%">


<p>ns_adp_abort; # Execution stops here.</p></td></tr>
</table>

<p style="margin-left:22%;">} <br>
%&gt;.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ns_adp(n)</p>

<h2>KEYWORDS
<a name="KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ADP, dynamic
pages, exception</p>
<hr>
</body>
</html>
