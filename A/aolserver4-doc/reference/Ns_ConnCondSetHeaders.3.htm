<!-- Creator     : groff version 1.21 -->
<!-- CreationDate: Sat May  5 10:27:20 2012 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Ns_ConnSetHeaders</title>

</head>
<body>

<h1 align="center">Ns_ConnSetHeaders</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#KEYWORDS">KEYWORDS</a><br>

<hr>



<p style="margin-top: 1em">______________________________________________________________________________</p>

<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Ns_ConnCondSetHeaders,
Ns_ConnSetExpiresHeader, Ns_ConnSetHeaders,
Ns_ConnSetLastModifiedHeader, Ns_ConnSetLengthHeader,
Ns_ConnSetRequiredHeaders &minus; Routines to manage
response headers</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&quot;ns.h&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">void <b><br>
Ns_ConnCondSetHeaders</b>(<i>conn, key, value</i>)</p>

<p style="margin-left:11%; margin-top: 1em">void <b><br>
Ns_ConnSetExpiresHeader</b>(<i>conn, expires</i>)</p>

<p style="margin-left:11%; margin-top: 1em">void <b><br>
Ns_ConnSetHeaders</b>(<i>conn, key, value</i>)</p>

<p style="margin-left:11%; margin-top: 1em">void <b><br>
Ns_ConnSetLastModifiedHeader</b>(<i>conn, mtime</i>)</p>

<p style="margin-left:11%; margin-top: 1em">void <b><br>
Ns_ConnSetLengthHeader</b>(<i>conn, length</i>)</p>

<p style="margin-left:11%; margin-top: 1em">void <b><br>
Ns_ConnSetRequiredHeaders</b>(<i>conn, type, length</i>)</p>

<p style="margin-left:11%; margin-top: 1em">void <b><br>
Ns_ConnSetTypeHeader</b>(<i>conn, type</i>)</p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p style="margin-top: 1em">Ns_Conn <i>conn</i> (in)</p></td>
<td width="7%"></td>
<td width="48%">


<p style="margin-top: 1em">Pointer to open connection.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p>char <i>*expires</i>(in)</p></td>
<td width="7%"></td>
<td width="48%">


<p>Pointer to string to construct an <i>expires</i>
header.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p>char <i>*key</i> (in)</p></td>
<td width="7%"></td>
<td width="48%">


<p>Pointer to string key for a header.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p>int <i>length</i> (in)</p></td>
<td width="7%"></td>
<td width="48%">


<p>Integer length of output content to construct a
<i>content-length</i> header.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p>time_t <i>mtime</i> (in)</p></td>
<td width="7%"></td>
<td width="48%">


<p>Modification time stamp to construct a
<i>last-modified</i> header.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p>int <i>status</i> (in)</p></td>
<td width="7%"></td>
<td width="48%">


<p>HTTP result status code.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p>char <i>*type</i> (in)</p></td>
<td width="7%"></td>
<td width="48%">


<p>Pointer to mimetype string to construct a
<i>content-type</i> header.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="34%">


<p>char <i>*value</i> (in)</p></td>
<td width="7%"></td>
<td width="48%">


<p>Pointer to a string value for a header.</p></td></tr>
</table>


<p style="margin-left:52%;">_________________________________________________________________</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These functions
manage the output headers eventually sent through the given
open connection to a client. They operate by modifying the
<i>outputheaders</i> Ns_Set of the connection Ns_Conn
structure. Headers can be modified until they are queued or
sent directly via the <b>Ns_ConnQueueHeaders</b> or
<b>Ns_ConnFlushHeaders</b> routines. It is possible to
modify the <i>outputheaders</i> directly although use of
these functions is preferred for consistancy.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
higher level output routines such as <b>Ns_ConnFlush</b> or
the various <b>Ns_ConnReturn</b> routines normally generate
all the headers necessary for a given response. These
routines are normally only necessary for specialized
applications which output additional specific headers or
specialized request procedures which do not use the higher
level output routines. <br>
void <b>Ns_ConnCondSetHeaders</b>(<i>conn, key,
value</i>)</p>

<p style="margin-left:22%;">Append an output header of the
form <i>key: value</i> only if the header does not already
exist in the <i>outputheaders</i> set.</p>

<p style="margin-left:11%;">void
<b>Ns_ConnSetExpiresHeader</b>(<i>conn, expires</i>)</p>

<p style="margin-left:22%;">This routine is equivalent to
<b>Ns_ConnSetHeaders</b>(<i>conn, &quot;Expires&quot;,
expires</i>). Note that the <i>exires</i> parameter is
treated as a string, not a timestamp. A timestamp can be
constructed with the <b>Ns_HttpTime</b> routine.</p>

<p style="margin-left:11%;">void
<b>Ns_ConnSetHeaders</b>(<i>conn, key, value</i>)</p>

<p style="margin-left:22%;">Append a header of the form
<i>key: value</i> to the <i>outputheaders</i>. This routine
will append a new, possibly duplicate, header regardless of
whether a matching header already exists in the
<i>outputheaders</i>.</p>

<p style="margin-left:11%;">void
<b>Ns_ConnSetLastModifiedHeader</b>(<i>conn, mtime</i>)</p>

<p style="margin-left:22%;">This routine appends a
<i>last-modified</i> header if one does not already exists,
formatting the given modification time as a proper HTTP
timestamp with the <b>Ns_HttpTime</b> routine.</p>

<p style="margin-left:11%;">void
<b>Ns_ConnSetLengthHeader</b>(<i>conn, length</i>)</p>

<p style="margin-left:22%;">This routine appends a
<i>content-length: length</i> header, formatting the given
integer length as a string. This routine will also record
the response length internally in the <i>conn</i> structure
so that it can be later retrieved via the
<b>Ns_ConnResponseLength</b> routine, for example, as part
of a post-connection logging callback.</p>

<p style="margin-left:11%;">void
<b>Ns_ConnSetRequiredHeaders</b>(<i>conn, type,
length</i>)</p>

<p style="margin-left:22%;">This routine appends the basic
headers normally required for a proper HTTP transaction.
These include <i>mime-version</i>, <i>date</i>, and
<i>server</i> as well as the <i>content-type: type</i> and
<i>content-length: length</i> headers for the given
arguments. If <i>type</i> is NULL or <i>length</i> is less
than zero, the corresponding headers will not be appended.
This routine is often the only header construction routine
necessary for request procedures which construct headers
manually instead of calling routines such as
<b>Ns_ConnFlush</b> which handle header construction and
queueing automatically.</p>

<p style="margin-left:11%;">void
<b>Ns_ConnSetTypeHeader</b>(<i>conn, type</i>)</p>

<p style="margin-left:22%;">This routine is equivalent to
<b>Ns_ConnSetHeaders</b>(<i>conn, &quot;content-type&quot;,
type</i>).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Ns_ConnQueueHeaders(3),
Ns_ConnFlushHeaders(3), Ns_ConnFlush(3)</p>

<h2>KEYWORDS
<a name="KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">headers,
response</p>
<hr>
</body>
</html>
