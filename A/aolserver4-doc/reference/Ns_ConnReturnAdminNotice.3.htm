<!-- Creator     : groff version 1.21 -->
<!-- CreationDate: Sat May  5 10:27:19 2012 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Ns_ConnReturnData</title>

</head>
<body>

<h1 align="center">Ns_ConnReturnData</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#KEYWORDS">KEYWORDS</a><br>

<hr>



<p style="margin-top: 1em">______________________________________________________________________________</p>

<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Ns_ConnReturnAdminNotice,
Ns_ConnReturnData, Ns_ConnReturnHtml, Ns_ConnReturnNotice
&minus; Routines to generate simple single-buffer
responses</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&quot;ns.h&quot;</b> <br>
int <b><br>
Ns_ConnReturnAdminNotice</b>(<i>conn, status, title,
msg</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Ns_ConnReturnData</b>(<i>conn, status, data, len,
type</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Ns_ConnReturnCharData</b>(<i>conn, status, data, len,
type</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Ns_ConnReturnHtml</b>(<i>conn, status, msg, len</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Ns_ConnReturnNotice</b>(<i>conn, status, title, msg</i>)</p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">


<p style="margin-top: 1em">Ns_Conn <i>conn</i> (in)</p></td>
<td width="9%"></td>
<td width="48%">


<p style="margin-top: 1em">Pointer to open connection.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">


<p>int <i>status</i> (in)</p></td>
<td width="9%"></td>
<td width="48%">


<p>HTTP response status code.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">


<p>char <i>*type</i> (in)</p></td>
<td width="9%"></td>
<td width="48%">


<p>Output content type.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">


<p>char <i>*title</i> (in)</p></td>
<td width="9%"></td>
<td width="48%">


<p>Pointer to HTML page title string.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">


<p>int <i>len</i> (in)</p></td>
<td width="9%"></td>
<td width="48%">


<p>Length of content buffer.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">


<p>char <i>*data</i> (in)</p></td>
<td width="9%"></td>
<td width="48%">


<p>Pointer to content buffer.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="32%">


<p>char <i>*msg</i> (in)</p></td>
<td width="9%"></td>
<td width="48%">


<p>Pointer to HTML message buffer.</p></td></tr>
</table>


<p style="margin-left:52%;">_________________________________________________________________</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These routines
are used to generate complete responses, including headers,
status codes, content types, and the requested data. They
all return a status code which is NS_OK if the response was
sent or NS_ERROR if an underlying call to sent the content
failed. <br>
int <b>Ns_ConnReturnAdminNotice</b>(<i>conn, status, title,
msg</i>)</p>

<p style="margin-left:22%;">This routine is equivalent to
<b>Ns_ConnReturnNotice</b>. In prior versions, it would
format a slightly different response which was later
considered inconsequential.</p>

<p style="margin-left:11%;">int
<b>Ns_ConnReturnData</b>(<i>conn, status, data, len,
type</i>)</p>

<p style="margin-left:22%;">Generates a reponse with the
given HTTP <i>status</i> including a <i>content-type</i>
header with the given <i>type</i>. Content pointed to by the
<i>data</i> argument of length <i>len</i> is then sent
without any modification via an underlying call to
<b>Ns_ConnFlushDirect</b>.</p>

<p style="margin-left:11%;">int
<b>Ns_ConnReturnCharData</b>(<i>conn, status, data, len,
type</i>)</p>

<p style="margin-left:22%;">Generates a response as with
<b>Ns_ConnReturnData</b> except that the given content
pointed to by <i>data</i> is assumed to be a text stream
which is output encoded using the appropriate Tcl_Encoding
based on the given <i>type</i> mimetype and possibly gzip
compressed via an underlying call to
<b>Ns_ConnFlush</b>.</p>

<p style="margin-left:11%;">int
<b>Ns_ConnReturnHtml</b>(<i>conn, status, msg, len</i>)</p>

<p style="margin-left:22%;">This is equivalent to
<b>Ns_ConnReturnCharData</b>(<i>conn, status, msg, len,
&quot;text/html&quot;</i>).</p>

<p style="margin-left:11%;">int
<b>Ns_ConnReturnNotice</b>(<i>conn, status, title,
msg</i>)</p>

<p style="margin-left:22%;">Constructs a basic HTML
response and sends it via <b>Ns_ConnReturnHtml</b>. The
<i>title</i> string is placed both in the &lt;head&gt;
portion as well as an &lt;h2&gt; tag in the &lt;body&gt;
portion of the document. If the title is NULL, it defaults
to the string &quot;Server Message&quot;. The <i>msg</i>
string, if not NULL, follows the body and is copied
unaltered. This routine is useful for generating very basic
responses. For example, it is used by the various builtin
reponse routines such as
<b>Ns_ConnReturnUnauthorized</b>.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Ns_ConnFlush(3),
Ns_ConnReturnFile, Ns_ConnReturnOpenFd,
Ns_ConnReturnUnathorized.</p>

<h2>KEYWORDS
<a name="KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">connnection,
encoding, response</p>
<hr>
</body>
</html>
