<!--plsfield:text-->
<HTML><HEAD>
<TITLE>C API Reference  -- Ns_AdpRegisterParser</TITLE>
<LINK rel=Previous href="c-ch7.htm">
<LINK rel=ToC href="toc.htm">
<LINK rel=Index href="master.htm">
<LINK rel=Next href="c-ch9.htm">
</HEAD><BODY BGCOLOR="#ffffff"><A NAME="topofpage"></A>
<TABLE WIDTH=100%>
  <TR>
    <TD ALIGN=LEFT>
      <A NAME="topofpage"></A> <IMG  SRC="as-c-sm.gif">
    </TD>
    <TD ALIGN=RIGHT>
      <A href="c-ch7.htm"><IMG  BORDER="0" src=navbprev.gif alt="[ Previous ]"></A>
      <A href=toc.htm> <IMG  BORDER="0" src=navbhome.gif alt="[ Contents ]"></A>
      <A href=master.htm> <IMG  BORDER="0" src=navbhelp.gif alt="[ Index ]"></A>
      <A href="c-ch9.htm"> <IMG  BORDER="0" src=navbnext.gif alt="[ Next ]"></A>
      <A name="7983"> </A>
    </TD>
  </TR>
</TABLE>

<a name="861558">
</a><h3>Ns_AdpRegisterParser</h3>
<a name="861969">
</a><h4>Overview</h4>
<p><a name="861970">
</a>Register a parser for ADPs</p>
<a name="861559">
</a><h4>Syntax</h4>
<pre>    <a name="861562"></a>int Ns_AdpRegisterParser (
    <a name="861986"></a>char *name,
    <a name="861564"></a>Ns_AdpParserProc *newParserProc
    <a name="861565"></a>);
    <a name="861989"></a>
    <a name="861567"></a>typedef void (Ns_AdpParserProc)(Ns_DString *out, char *in);
</pre><p><a name="861568">
</a><h4>Description</h4>
<p><a name="871027">
</a>This registers a new ADP parser with the name "name". The newParserProc will be called when an ADP is to be parsed. The content of the ADP will be in the "in" parameter. The parser should parse it and append appropriate output into the "out" parameter. </p>
<p><a name="871066">
</a>The output should be formatted as a series of concatenated "chunks". A chunk is a string of the format:</p>
<pre>    <a name="871033"></a>&lt;type character&gt;&lt;string&gt;&lt;null&gt;
where:
<a name="871034">
</a>&lt;type character&gt; = 't' or 's'. A 't' means what follows is HTML and should be returneddirectly to the browser. An 's' means what follows is Tcl and should be evaluated.
<a name="871035">
</a></pre><p><p><a name="871041">
</a>After the last chunk there should be an extra &lt;null&gt; character. For example, the "adp" parser will take a page like this:</p>
<pre>    <a name="871044"></a>This is a test page&lt;%ns_puts hi%&gt;The end&lt;%ns_puts bye%&gt;
</pre><p><p><a name="871046">
</a>And create this output:</p>
<pre>    <a name="879697"></a>"tThis is a test page\0sns_puts hi\0tThe end\0sns_puts bye\0\0"
</pre><p>

<TABLE BORDER="2" CELLPADDING="1" width="100%">
<TR><TD COLSPAN=3><P ALIGN=Center>
<IMG SRC="bluebult.gif">
<A HREF="#topofpage">
<FONT SIZE=-1>Top of Page</FONT></A>
<IMG SRC="bluebult.gif">
</TD></TR>
<TR><TD COLSPAN=3><P ALIGN=Center>
<A href="c-ch7.htm">
<IMG  BORDER="0" src=navbprev.gif alt="[ Previous ]"></A>
<A href=toc.htm>
<IMG  BORDER="0" src=navbhome.gif alt="[ Contents ]"></A>
<A href=master.htm>
<IMG  BORDER="0" src=navbhelp.gif alt="[ Index ]"></A>
<A href="c-ch9.htm">
<IMG  BORDER="0" src=navbnext.gif alt="[ Next ]"></A>
<BR align=center>
<FONT size=-1>Copyright &copy; 1998-99 America Online,
Inc.</FONT>
</TD></TR></TABLE></BODY></HTML><!--plsfield:end-->