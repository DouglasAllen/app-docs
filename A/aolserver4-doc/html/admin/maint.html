<html>
<head>
<title>AOLserver</title>
</head>
<body>
    

<h1>AOLserver Maintenance Guide</h1>

<p>
<small>
$Header: /cvsroot/aolserver/aolserver.com/docs/admin/maint.html,v 1.1 2002/03/07 19:15:34 kriston Exp $
</small>
<p>

<a href=#1>AOLserver Maintenance</a>

<p>

<a href=#2>Maintain the AOLserver Directories</a.


<p>

<h2><a name=1>AOLserver Maintenance</a></h2>

<p>

An AOLserver installation requires regular maintenance as follows:

<p>

<br>
  * Make regular backups of pages and associated files for each
 virtual server.

<br>
  * Make regular backups of the access log.

<br>
  * Make regular backups of the server log, especially if verbose
 messages are enabled.

<br>
  * Make regular backups of the Tcl directory(ies).

<br>
  * Make regular backups of the bin directory, especially if you have
 customized loadable modules.

<p>

Each of these maintenance tasks is described in the following
sections.

  

<p>

<h2><a name=2>Maintain the AOLserver Directories</a></h2>

<p>

The AOLserver directories described below should be backed up
regularly to ensure against file system failure.

<p>

 Back Up the Pages Directory

<p>

The location of the pages directory for each virtual server is
determined by the server-specific PageRoot entry in the AOLserver
configuration file (see Chapter 4). Normally, it is the
/servers/servername/pages subdirectory under the AOLserver home
directory.

<p>

Use whatever file system backup procedure you have in place at your
site. To schedule nightly backups, use the Unix cron facility.

<p>

 Back Up the Access Log

<p>

The access log file needs to be backed up regularly. By default, the
access log for each virtual server is in the
/servers/server-name/modules/nslog/access.log file under the AOLserver
home directory.

<p>

The access log can be configured to limit the number of old logs
maintained (with the MaxBackup parameter). This sets an upper limit on
the amount of disk space the access logs take. However, because old
logs beyond the limit configured to be saved by the AOLserver are
deleted automatically, you must back up old logs if you require a
complete history of access to your site. For example, if the MaxBackup
parameter in the configuration file is set to 5, only five old access
log files will remain on disk. When a sixth log file needs to be
opened, the oldest log is removed.

<p>

 Back Up the Server Log

<p>

Ordinarily, the server log file grows at a slow rate and does not need
regular truncation. However, while debugging new applications, you
should set the Verbose parameter in the ns/module/nsdb/pool/pool-name
section in the configuration file to on instead of off (the
default). Every SQL statement sent to the database is logged in the
error log and causes the file to grow much more quickly. In this case
you may want to back up the error log.

<p>

 Back Up the Tcl Scripts Directory

<p>

The Tcl scripts directory contains the source to the Tcl scripts that
provide the server with much of its advanced functionality. Tcl
scripts for each virtual server are stored in the
/servers/servername/modules/tcl subdirectory by default, and global
Tcl scripts are stored in the /modules/tcl subdirectory by default.

<p>

If you write new Tcl scripts or edit the existing ones, you must
ensure your changes are saved regularly to a safe place. Also, be sure
that any external files utilized by your Tcl scripts are backed up
too, including files outside the AOLserver home directory.

<p>

 Back Up the bin Directory

<p>

The /bin subdirectory of the AOLserver home is the location of the
AOLserver binary and the default location of any dynamically loadable
C modules. If your site maintains several interesting loadable
modules, you must make sure copies of the modules are backed up to
avoid having to recompile them after a file system failure. Also, be
sure to back up your module source code.


<p>

 
</body>
</html>

