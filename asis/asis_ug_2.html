<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on June 12, 2012 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>ASIS-for-GNAT User's Guide: 2. Getting Started</title>

<meta name="description" content="ASIS-for-GNAT User's Guide: 2. Getting Started">
<meta name="keywords" content="ASIS-for-GNAT User's Guide: 2. Getting Started">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Getting-Started"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="asis_ug_1.html#ASIS-Scope-_002d-Which-Kinds-of-Tools-Can-Be-Built-with-ASIS_003f" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Problem" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="asis_ug_1.html#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_0.html#About-This-Guide" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_3.html#ASIS-Overview" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="asis_ug_0.html#About-This-Guide" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_14.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Getting-Started-1"></a>
<h1 class="chapter">2. Getting Started</h1>

<p>This section outlines the ASIS application development and usage cycle.
We first take a sample problem and present an ASIS application that offers a
solution; then we show how to build the
executable with ASIS-for-GNAT and how to prepare an ASIS &ldquo;Context&rdquo; to be
processed by the program; and finally we show the output produced by our
program when it is applied to itself.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#The-Problem">2.1 The Problem</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#An-ASIS-Application-that-Solves-the-Problem">2.2 An ASIS Application that Solves the Problem</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Required-Sequence-of-Calls">2.3 Required Sequence of Calls</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Building-the-Executable-for-an-ASIS-application">2.4 Building the Executable for an ASIS application</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Preparing-Data-for-an-ASIS-Application-_002d-Generating-Tree-Files">2.5 Preparing Data for an ASIS Application - Generating Tree Files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Running-an-ASIS-Application">2.6 Running an ASIS Application</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="The-Problem"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Getting-Started" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#An-ASIS-Application-that-Solves-the-Problem" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_3.html#ASIS-Overview" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="asis_ug_0.html#About-This-Guide" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_14.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-Problem-1"></a>
<h2 class="section">2.1 The Problem</h2>

<p>We wish to process some set of Ada compilation units as follows:
for every unit, print its full expanded Ada name,
whether this unit is a spec<a name="DOCF1" href="asis_ug_fot.html#FOOT1">(1)</a>, a
body or a subunit, and whether this unit is a user-defined unit, an Ada predefined
unit or an implementation-specific unit (such as a part of
a Run-Time Library).
</p>

<hr size="6">
<a name="An-ASIS-Application-that-Solves-the-Problem"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#The-Problem" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Required-Sequence-of-Calls" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_3.html#ASIS-Overview" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="asis_ug_0.html#About-This-Guide" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_14.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="An-ASIS-Application-that-Solves-the-Problem-1"></a>
<h2 class="section">2.2 An ASIS Application that Solves the Problem</h2>
<a name="index-ASIS-Example"></a>

<table><tr><td>&nbsp;</td><td><pre class="smallexample"> with Ada.Wide_Text_IO;        use Ada.Wide_Text_IO;
with Ada.Characters.Handling; use Ada.Characters.Handling;

--  ASIS-specific context clauses:
with Asis;
with Asis.Implementation;
with Asis.Ada_Environments;
with Asis.Compilation_Units;
with Asis.Exceptions;
with Asis.Errors;

procedure Example1 is
   My_Context : Asis.Context;
<a name="index-Context-type-_0028example_0029"></a>   --  ASIS Context is an abstraction of an Ada compilation environment,
   --  it defines a set of ASIS Compilation Units available through
   --  ASIS queries

begin
   --  first, by initializing an ASIS implementation, we make it
   --  ready for work
   Asis.Implementation.Initialize (&quot;-ws&quot;);
<a name="index-Asis_002eImplementation_002eInitialize-procedure-_0028example_0029"></a>   --  The &quot;-ws&quot; parameter of the Initialize procedure means
   --  &quot;turn off all the ASIS warnings&quot;

   --  then we define our Context by making an association with
   --  the &quot;physical&quot; environment:
   Asis.Ada_Environments.Associate
    (My_Context, &quot;My Asis Context&quot;, &quot;-CA&quot;);
<a name="index-Asis_002eAda_005fEnvironments_002eAssociate-query-_0028example_0029"></a>   --  &quot;-CA&quot; as a Context parameter means &quot;consider all the tree
   --  files in the current directory&quot;
   --  See ASIS-for-GNAT Reference Manual for the description of the
   --  parameters of the Associate query, see also chapter
   --  &quot;ASIS Context&quot; for the description of different kinds of
   --  ASIS Context in case of ASIS-for-GNAT

   --  by opening a Context we make it ready for processing by ASIS
   --  queries
   Asis.Ada_Environments.Open (My_Context);
<a name="index-Asis_002eAda_005fEnvironments_002eOpen-procedure-_0028example_0029"></a>
   Processing_Units: declare
      Next_Unit : Asis.Compilation_Unit;
<a name="index-Compilation_005fUnit-type-_0028example_005f"></a>      --  ASIS Compilation_Unit is the abstraction to represent Ada
      --  compilation units as described in RM 95

      All_Units : Asis.Compilation_Unit_List :=
      --  ASIS lists are one-dimensional unconstrained arrays.
      --  Therefore, when declaring an object of an ASIS list type,
      --  we have to provide either a constraint or explicit
      --  initialization expression:

         Asis.Compilation_Units.Compilation_Units (My_Context);
      --  The Compilation_Units query returns a list of all the units
      --  contained in an ASIS Context
   begin
      Put_Line
        (&quot;A Context contains the following compilation units:&quot;);
      New_Line;
      for I in All_Units'Range loop
         Next_Unit := All_Units (I);
         Put (&quot;   &quot;);

         --  to get a unit name, we just need a Unit_Full_Name
         --  query. ASIS uses Wide_String as a string type,
         --  that is why we are using Ada.Wide_Text_IO

         Put (Asis.Compilation_Units.Unit_Full_Name (Next_Unit));
<a name="index-Asis_002eCompilation_005fUnits_002eUnit_005fFull_005fName-query-_0028example_0029"></a>
         --  to get more info about a unit, we ask about unit class
         --  and about unit origin

         case Asis.Compilation_Units.Unit_Kind (Next_Unit) is
<a name="index-Asis_002eCompilation_005fUnits_002eUnit_005fKind-query-_0028example_0029"></a>            when Asis.A_Library_Unit_Body =&gt;
               Put (&quot; (body)&quot;);
            when Asis.A_Subunit =&gt;
               Put (&quot; (subunit)&quot;);
            when others =&gt;
               Put (&quot; (spec)&quot;);
         end case;

         case Asis.Compilation_Units.Unit_Origin (Next_Unit) is
<a name="index-Asis_002eCompilation_005fUnits_002eUnit_005fOrigin-query-_0028example_0029"></a>            when Asis.An_Application_Unit =&gt;
               Put_Line (&quot; - user-defined unit&quot;);
            when Asis.An_Implementation_Unit =&gt;
               Put_Line (&quot; - implementation-specific unit&quot;);
            when Asis.A_Predefined_Unit =&gt;
               Put_Line (&quot; - Ada predefined unit&quot;);
            when Asis.Not_An_Origin =&gt;
               Put_Line
                 (&quot; - unit does not actually exist in a Context&quot;);
         end case;

      end loop;
   end Processing_Units;

   --  Cleaning up: we have to close out the Context, break its
   --  association with the external environment and finalize
   --  our ASIS implementation to release all the resources used:
   Asis.Ada_Environments.Close (My_Context);
<a name="index-Asis_002eAda_005fEnvironments_002eClose-procedure-_0028example_0029"></a>   Asis.Ada_Environments.Dissociate (My_Context);
<a name="index-Asis_002eAda_005fEnvironments_002eDissociate-procedure-_0028example_0029"></a>   Asis.Implementation.Finalize;
<a name="index-Asis_002eImplementation_002eFinalize-procedure-_0028example_0029"></a>
exception
   when Asis.Exceptions.ASIS_Inappropriate_Context |
<a name="index-Asis_002eExceptions_002eASIS_005fInappropriate_005fContext-exception-_0028example_0029"></a>        Asis.Exceptions.ASIS_Inappropriate_Compilation_Unit |
<a name="index-Asis_002eExceptions_002eASIS_005fInappropriate_005fCompilation_005fUnit-exception-_0028example_0029"></a>        Asis.Exceptions.ASIS_Failed =&gt;
<a name="index-Asis_002eExceptions_002eASIS_005fFailed-exception-_0028example_0029"></a>
      --  we check not for all the ASIS-defined exceptions, but only
      --  those of them which can actually be raised in our ASIS
      --  application.
      --
      --  If an ASIS exception is raised, we output the ASIS error
      --  status and the ASIS diagnosis string:

      Put_Line (&quot;ASIS exception is raised:&quot;);
      Put_Line (&quot;ASIS diagnosis is:&quot;);
      Put_Line (Asis.Implementation.Diagnosis);
      Put      (&quot;ASIS error status is: &quot;);
      Put_Line
        (Asis.Errors.Error_Kinds'Wide_Image
           (Asis.Implementation.Status));
<a name="index-Asis_002eImplementation_002eStatus-function-_0028example_0029"></a>end Example1;
</pre></td></tr></table>


<hr size="6">
<a name="Required-Sequence-of-Calls"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#An-ASIS-Application-that-Solves-the-Problem" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Building-the-Executable-for-an-ASIS-application" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_3.html#ASIS-Overview" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="asis_ug_0.html#About-This-Guide" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_14.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Required-Sequence-of-Calls-1"></a>
<h2 class="section">2.3 Required Sequence of Calls</h2>

<p>An ASIS application must use the following sequence of calls:
</p>
<ol>
<li>
<code>Asis.Implementation.Initialize (...);</code>
<a name="index-Asis_002eImplementation_002eInitialize-procedure"></a>

<p>This initializes the ASIS implementation&rsquo;s internal data structures.
In general, calling an ASIS
query is erroneous unless the <code>Initialize</code> procedure has been invoked.
<a name="index-Erroneous-execution"></a>
</p>
</li><li>
<code>Asis.Ada_Environments.Associate (...);</code>
<a name="index-Asis_002eImplementation_002eAssociate-procedure"></a>

<p>This call is the only means to define a value of a variable of the
ASIS limited private type <code>Context</code>.
<a name="index-Context-type"></a>
The value represents some specific
association of the ASIS <code>Context</code> with the &ldquo;external world&rdquo;. The way
of making this association and the meaning of the corresponding
parameters of the <code>Associate</code> query are implementation-specific,
but as soon as this association has been made and a <code>Context</code> variable
is opened, the ASIS <code>Context</code> designated by this variable may be
considered to be a set of ASIS <code>Compilation_Unit</code>s
<a name="index-Compilation_005fUnit-type"></a>
available through the ASIS queries.
</p>
</li><li>
<code>Asis.Ada_Environments.Open (...);</code>
<a name="index-Asis_002eAda_005fEnvironments_002eOpen-procedure"></a>

<p>Opening an ASIS <code>Context</code> variable makes the corresponding <code>Context</code>
accessible to all ASIS queries.
</p>
<p> After opening the <code>Context</code>, an ASIS application can start obtaining
 ASIS <code>Compilation_Unit</code>s from it, can further analyze <code>Compilation_Unit</code>s
 by decomposing them into ASIS <code>Element</code>s, etc.
<a name="index-Compilation_005fUnit-type-1"></a>
<a name="index-Element-type"></a>
</p>
<p> ASIS relies on the fact that the content of a <code>Context</code> remains &ldquo;frozen&rdquo;
 as long as the <code>Context</code> remains open.
 It is erroneous
<a name="index-Erroneous-execution-1"></a>
to change through some non-ASIS program any data
 structures used by an ASIS implementation to define and implement
 this <code>Context</code> while the <code>Context</code> is open.
</p>
</li><li>
Now all the ASIS queries can be used. It is possible to access <code>Compilation_Unit</code>s
from the <code>Context</code>, to decompose units into syntactic <code>Element</code>s,
<a name="index-Compilation_005fUnit-type-2"></a>
<a name="index-Element-type-1"></a>
to query syntactic and semantic properties of these
<code>Element</code>s and so on.

</li><li>
<code>Asis.Ada_Environments.Close (...);</code>
<a name="index-Ada_005fEnvironments_002eClose-procedure"></a>

<p>After closing the <code>Context</code> it is impossible to retrieve any information
from it. All the values of the ASIS objects of <code>Compilation_Unit</code>,
<a name="index-Context-type-1"></a>
<a name="index-Compilation_005fUnit-type-3"></a>
<code>Element</code>
<a name="index-Element-type-2"></a>
and <code>Line</code>
<a name="index-Line-type"></a>
types obtained when this <code>Context</code> was open become
obsolete, and it is erroneous
<a name="index-Erroneous-execution-2"></a>
to use them after the <code>Context</code> was closed.
 The content of this <code>Context</code> need not be frozen while
 the <code>Context</code> remains closed. Note that a closed <code>Context</code> keeps its
 association with the &ldquo;external world&rdquo; and it may be opened again with
 the same association. Note also that the content (that is, the
 corresponding set of ASIS <code>Compilation_Unit</code>s) of the <code>Context</code> may be
 different from what was in the <code>Context</code> before, because the &ldquo;external
 world&rdquo; may have changed while the <code>Context</code> remained closed.
</p>
</li><li>
<code>Asis.Ada_Environments.Dissociate (...);</code>
<a name="index-Asis_002eAda_005fEnvironments_002eDissociate-procedure"></a>

<p>This query breaks the association between the corresponding ASIS
<code>Context</code> and the &ldquo;external world&rdquo;, and the corresponding <code>Context</code>
variable becomes undefined.
</p>
</li><li>
<code>Asis.Implementation.Finalize (...);</code>
<a name="index-Asis_002eImplementation_002eFinalize-procedure"></a>

<p>This releases all the resources used by an ASIS implementation.
</p></li></ol>

<p>An application can perform these steps in a loop. It may initialize and
finalize an ASIS implementation several times, it may associate and dissociate
the same <code>Context</code> several times while an ASIS implementation remains
initialized, and it may open and close the same <code>Context</code> several times while
the <code>Context</code> keeps its association with the &ldquo;external world&rdquo;.
<a name="index-Context-type-2"></a>
</p>
<p>An application can have several ASIS <code>Context</code>s opened at a time (the upper
limit is implementation-specific), and for each open <code>Context</code>, an application
can process several <code>Compilation_Unit</code>s obtained from this <code>Context</code> at a time
(the upper limit is also implementation-specific). ASIS-for-GNAT
<a name="index-ASIS_002dfor_002dGNAT"></a>
does not
impose any special limitations on the number of ASIS <code>Context</code>s and on the
number of the ASIS <code>Compilation_Unit</code>s processed at a time, as long as an ASIS
application is within the general resource limitations of the underlying
system.
</p>

<hr size="6">
<a name="Building-the-Executable-for-an-ASIS-application"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Required-Sequence-of-Calls" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Preparing-Data-for-an-ASIS-Application-_002d-Generating-Tree-Files" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_3.html#ASIS-Overview" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="asis_ug_0.html#About-This-Guide" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_14.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Building-the-Executable-for-an-ASIS-application-1"></a>
<h2 class="section">2.4 Building the Executable for an ASIS application</h2>

<p>The rest of this section assumes that you have ASIS-for-GNAT properly
installed as an Ada library.
<a name="index-ASIS_002dfor_002dGNAT-1"></a>
</p>
<p>To get the executable for the ASIS application from
<a href="#An-ASIS-Application-that-Solves-the-Problem">An ASIS Application that Solves the Problem</a> (assuming
that it is located in your current directory as the Ada source file named
&lsquo;<tt>example1.adb</tt>&rsquo;), invoke <code>gnatmake</code> as follows<a name="DOCF2" href="asis_ug_fot.html#FOOT2">(2)</a>:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">$ gnatmake example1.adb -largs -lasis
</pre></td></tr></table>

<p>For more details concerning compiling ASIS applications and building
executables for them with ASIS-for-GNAT see
<a href="asis_ug_10.html#Compiling-Binding-and-Linking-Applications-with-ASIS_002dfor_002dGNAT">Compiling, Binding and Linking Applications with ASIS-for-GNAT</a>.
</p>

<hr size="6">
<a name="Preparing-Data-for-an-ASIS-Application-_002d-Generating-Tree-Files"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Building-the-Executable-for-an-ASIS-application" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-an-ASIS-Application" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_3.html#ASIS-Overview" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="asis_ug_0.html#About-This-Guide" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_14.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Preparing-Data-for-an-ASIS-Application-_2212-Generating-Tree-Files"></a>
<h2 class="section">2.5 Preparing Data for an ASIS Application - Generating Tree Files</h2>

<p>The general ASIS implementation technique is to use some information generated
by the underlying Ada compiler as the basis for retrieving information
from the Ada environment. As a consequence, an ASIS application can process
only legal (compilable) Ada code, and in most of the cases to make a
compilation unit &ldquo;visible&rdquo; for ASIS means to compile this unit (probably
with some ASIS-specific options)
</p>
<p>ASIS-for-GNAT uses <em>tree output files</em> (or, in short, <em>tree files</em>)
to capture
<a name="index-Tree-file"></a>
information about an Ada unit from an Ada environment. A tree file is
generated by GNAT, and it contains a snapshot of the compiler&rsquo;s internal
data structures at the end of the successful compilation of the
corresponding source file.
</p>
<p>To create a tree file for a unit contained in some source file, you should
compile this file with the &lsquo;<samp>-gnatct</samp>&rsquo; compiler option.
<a name="index-_002dgnatct-option"></a>
If you want to apply
the program described in section
<a href="#An-ASIS-Application-that-Solves-the-Problem">An ASIS Application that Solves the Problem</a> to itself,
compile the source of this application with the command:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">$ gcc -c -gnatct example1.adb
</pre></td></tr></table>

<p>and as a result, GNAT will generate the tree file named &lsquo;<tt>example1.adt</tt>&rsquo; in the current
directory.
</p>
<p>For more information on how to generate and deal with tree files, see
<a href="asis_ug_4.html#ASIS-Context">ASIS <code>Context</code></a>, and <a href="asis_ug_7.html#ASIS-Tutorials">ASIS Tutorials</a>.
</p>

<hr size="6">
<a name="Running-an-ASIS-Application"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Preparing-Data-for-an-ASIS-Application-_002d-Generating-Tree-Files" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_3.html#ASIS-Overview" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_3.html#ASIS-Overview" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="asis_ug_0.html#About-This-Guide" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_14.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Running-an-ASIS-Application-1"></a>
<h2 class="section">2.6 Running an ASIS Application</h2>

<p>To complete our example, let&rsquo;s execute our ASIS application. If you have
followed all the steps described in this chapter,
your current directory should contain the executable &lsquo;<tt>example1</tt>&rsquo;
(&lsquo;<tt>example1.exe</tt>&rsquo; on a Windows platform)
and the tree file &lsquo;<tt>example1.adt</tt>&rsquo;.
If we run
our application, it will process an ASIS <code>Context</code> defined by one tree file
&lsquo;<tt>example1.adt</tt>&rsquo; (for more details about defining an ASIS <code>Context</code> see
<a href="asis_ug_4.html#ASIS-Context">ASIS <code>Context</code></a>, and the <cite>ASIS-for-GNAT Reference Manual</cite>).
<a name="index-Context-type-3"></a>
The result will be:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">   A <code>Context</code> contains the following compilation units:

      Standard (spec) - Ada predefined unit
      Example1 (body) - user-defined unit
      Ada (spec) - Ada predefined unit
      Ada.Wide_Text_IO (spec) - Ada predefined unit
      Ada.IO_Exceptions (spec) - Ada predefined unit
      Ada.Streams (spec) - Ada predefined unit
      System (spec) - Ada predefined unit
      System.File_Control_Block (spec) - implementation-specific unit
      Interfaces (spec) - Ada predefined unit
      Interfaces.C_Streams (spec) - implementation-specific unit
      System.Parameters (spec) - implementation-specific unit
      System.WCh_Con (spec) - implementation-specific unit
      Ada.Characters (spec) - Ada predefined unit
      Ada.Characters.Handling (spec) - Ada predefined unit
      Asis (spec) - user-defined unit
      A4G (spec) - user-defined unit
      A4G.A_Types (spec) - user-defined unit
      Ada.Characters.Latin_1 (spec) - Ada predefined unit
      GNAT (spec) - implementation-specific unit
      GNAT.OS_Lib (spec) - implementation-specific unit
      GNAT.Strings (spec) - implementation-specific unit
      Unchecked_Deallocation (spec) - Ada predefined unit
      Sinfo (spec) - user-defined unit
      Types (spec) - user-defined unit
      Uintp (spec) - user-defined unit
      Alloc (spec) - user-defined unit
      Table (spec) - user-defined unit
      Urealp (spec) - user-defined unit
      A4G.Int_Knds (spec) - user-defined unit
      Asis.Implementation (spec) - user-defined unit
      Asis.Errors (spec) - user-defined unit
      Asis.Ada_Environments (spec) - user-defined unit
      Asis.Compilation_Units (spec) - user-defined unit
      Asis.Ada_Environments.Containers (spec) - user-defined unit
      Asis.Exceptions (spec) - user-defined unit
      System.Unsigned_Types (spec) - implementation-specific unit
</pre></td></tr></table>

<p>Note that the tree file
<a name="index-Tree-file-1"></a>
contains the full syntactic and semantic information not only
about the unit compiled by the given call to <code>gcc</code>, but also about all
the units upon which this unit depends semantically; that is why you can see
in the output list a number of units which are not mentioned in our example.
</p>
<p>In the current version of ASIS-for-GNAT, ASIS implementation components are considered
user-defined, rather than implementation-specific, units.
</p>

<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Getting-Started" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_3.html#ASIS-Overview" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="asis_ug_0.html#About-This-Guide" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_14.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="asis_ug_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>root</em> on <em>June 12, 2012</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
 </font>
 <br>

</p>
</body>
</html>
